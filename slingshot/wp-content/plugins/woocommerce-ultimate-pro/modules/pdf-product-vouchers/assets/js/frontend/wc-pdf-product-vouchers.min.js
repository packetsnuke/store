(function() {  jQuery(function($) {
    'use strict';
    var get_voucher_images;
    $(document).bind('reset_image', function() {
      return $('.voucher-fields-wrapper-variation').hide();
    });
    $('form.variations_form').on('show_variation', function(event, variation) {
      $('.voucher-fields-wrapper-variation').hide();
      return $('#voucher-fields-wrapper-' + variation.variation_id).show();
    });
    if (typeof PhotoSwipe !== 'undefined') {
      $('body').on('click', '.voucher-image-option a', function(event) {
        var index, items, options, photoswipe, pswpElement;
        event.preventDefault();
        pswpElement = $('.pswp')[0];
        items = get_voucher_images(event.target);
        index = $(event.target).closest('.voucher-image-option').index();
        options = {
          index: index,
          shareEl: false,
          closeOnScroll: false,
          history: false,
          hideAnimationDuration: 0,
          showAnimationDuration: 0
        };
        photoswipe = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);
        return photoswipe.init();
      });
      return get_voucher_images = function(el) {
        var $images, items;
        $images = $(el).closest('.voucher-image-options').find('.voucher-image-option img');
        items = [];
        if ($images.length > 0) {
          $images.each(function(i, el) {
            var item, large_image_h, large_image_src, large_image_w, link;
            link = $(el).closest('a');
            large_image_src = link.attr('href');
            large_image_w = link.attr('data-large_image_width');
            large_image_h = link.attr('data-large_image_height');
            item = {
              src: large_image_src,
              w: large_image_w,
              h: large_image_h,
              title: $(el).attr('title')
            };
            return items.push(item);
          });
        }
        return items;
      };
    }
  });

}).call(this);


