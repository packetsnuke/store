(function(){"use strict";var a,b,c,d;a=window.jQuery,d=window.wp,c=window.wc_tab_manager_admin_params,b=function(){function b(){return this.update_button=this.el.find(".batch-update-button"),this.update_message=this.el.find(".description"),this.update_spinner=this.el.find(".ajax-spinner"),this.update_button.on("click",function(a){return function(b){return b.preventDefault(),a.el.trigger("batch_update.begin")}}(this)),this.bind_events(),this}return b.prototype.el=a("#wc-tab-manager-batch-update-settings"),b.prototype.update_button=null,b.prototype.update_message=null,b.prototype.update_spinner=null,b.prototype.template=d.template("batch-product-update-message"),b.prototype.events={"batch_update.begin":"update_begin","batch_update.complete":"update_complete"},b.prototype.bind_events=function(){return a.each(this.events,function(b){return function(c,d){return b.el.on(c,a.proxy(b,d))}}(this)),this},b.prototype.update_begin=function(){return this.update_spinner.addClass("active"),this.update_message.html(this.template()),this.process_batch(0),this},b.prototype.update_complete=function(){return this.update_spinner.removeClass("active"),this},b.prototype.process_batch=function(b){return b=parseInt(b,10),a.ajax({type:"POST",url:c.ajax_url,data:{action:"wc_tab_manager_batch_update_products",step:b,nonce:c.nonce},dataType:"json",success:function(a){return function(c){if(null!=c.data)return a.update_message.html(a.template(c.data)),c.data.complete?a.el.trigger("batch_update.complete"):0===c?a.el.trigger("batch_update.failed"):a.process_batch(++b)}}(this)}).fail(function(a){return function(b){return a.update_message.html("Uh-oh, something went wrong with the server.\nHopefully this is a temporary problem.")}}(this)),this},b}(),c.batch_update_view=new b}).call(this);