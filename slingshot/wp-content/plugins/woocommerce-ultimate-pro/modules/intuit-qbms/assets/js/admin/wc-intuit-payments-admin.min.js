/**
 * WooCommerce Intuit Payments Admin scripts
 *
 * @since 2.0.0
 */

(function() {
  intuit.ipp.anywhere.setup({
    grantUrl: wc_intuit_payments.connect_url,
    datasources: {
      quickbooks: false,
      payments: true
    },
    paymentOptions: {
      intuitReferred: true
    }
  });

  jQuery(document).ready(function($) {
    "use strict";
    $('.js-wc-intuit-payments-connect').click(function(e) {
      e.preventDefault();
      return intuit.ipp.anywhere.controller.onConnectToIntuitClicked(this);
    });
    $('.js-wc-intuit-payments-reconnect').click(function(e) {
      var data;
      e.preventDefault();
      $(this).closest('table').block({
        message: null,
        overlayCSS: {
          background: '#fff',
          opacity: 0.6
        }
      });
      data = {
        action: 'wc_intuit_payments_reconnect',
        nonce: wc_intuit_payments.reconnect_nonce,
        gateway_id: $(this).data('gateway-id')
      };
      return $.post(wc_intuit_payments.ajax_url, data, function(response) {
        return window.location.reload();
      });
    });
    return $('.js-wc-intuit-payments-disconnect').click(function(e) {
      var data;
      e.preventDefault();
      if (confirm(wc_intuit_payments.i18n.ays_disconnect)) {
        $(this).closest('table').block({
          message: null,
          overlayCSS: {
            background: '#fff',
            opacity: 0.6
          }
        });
        data = {
          action: 'wc_intuit_payments_disconnect',
          nonce: wc_intuit_payments.disconnect_nonce,
          gateway_id: $(this).data('gateway-id')
        };
        return $.post(wc_intuit_payments.ajax_url, data, function(response) {
          return window.location.reload();
        });
      }
    });
  });

}).call(this);


