/*! wc_name_your_price 2.5.0-RC-2 */
jQuery(document).ready(function(a){function b(a,b){return"undefined"==typeof b&&(b=""),accounting.formatMoney(a,{symbol:b,decimal:woocommerce_nyp_params.currency_format_decimal_sep,thousand:woocommerce_nyp_params.currency_format_thousand_sep,precision:woocommerce_nyp_params.currency_format_num_decimals,format:woocommerce_nyp_params.currency_format}).trim()}function c(a){return Math.abs(parseFloat(accounting.unformat(a,woocommerce_nyp_params.currency_format_decimal_sep)))}a.fn.woocommerce_nyp_update=function(){if(a(this).on("woocommerce-nyp-update",function(){var d=a(this),e=d.find(".nyp"),f=d.find(".nyp-input"),g=(d.find(":submit"),f.val()),h=d.find(".woocommerce-nyp-message");h.length||e.prepend('<div class="woocommerce-nyp-message woocommerce-error" style="display:none"></div>');var i=woocommerce_nyp_params.minimum_error,j=!1,k="",l=c(g),m=parseFloat(e.data("min-price")),n=parseFloat(e.data("annual-minimum")),o=d.find(".nyp-period"),p=o.val();n>0?(form_annulualized_price=l*woocommerce_nyp_params.annual_price_factors[p],form_annulualized_price<n&&(j=n/woocommerce_nyp_params.annual_price_factors[p],k=b(j,woocommerce_nyp_params.currency_format_symbol)+" / "+o.find('option[value="'+p+'"]').text())):m>l&&(j=m,k=b(j,woocommerce_nyp_params.currency_format_symbol)),""!=a.trim(g)&&f.val(b(l)),j?(e.data("submit",!1),i=i.replace("%%MINIMUM%%",k),h.html(i).slideDown(),f.focus()):(e.data("submit",!0),h.slideUp(),a(this).find("#product-addons-total").data("price",l),d.trigger("woocommerce-product-addons-update"),e.data("price",l),d.trigger("woocommerce-nyp-updated-item"),a("body").trigger("woocommerce-nyp-updated"))}),a(this).on("change",".nyp-input, .nyp-period",function(){var b=a(this).closest(".cart");b.trigger("woocommerce-nyp-update")}),a(this).closest("form").on("submit",function(){a(this).find(".nyp").data("submit")===!1&&(event.preventDefault(),a(this).find(":submit").removeAttr("disabled"))}),a(this).find("input.nyp-input").trigger("change"),a(this).hasClass("variations_form")){var d=a(this),e=a(this).find("button.single_add_to_cart_button"),f=a(this).find(".nyp"),g=f.find(".nyp-input"),h=f.find(".minimum-price"),i=f.find(".subscription-details"),j=e.html();f.hide(),h.hide(),d.on("found_variation",function(c,d){void 0!=typeof d.is_nyp&&1==d.is_nyp?(e.html(d.add_to_cart_text),posted_price=d.posted_price,initial_price=d.initial_price,minimum_price=d.minimum_price,""!=a.trim(posted_price)?g.val(b(posted_price)):""!=a.trim(initial_price)?g.val(b(initial_price)):g.val(""),i.length&&d.subscription_terms&&i.html(d.subscription_terms),d.minimum_price_html?h.html(d.minimum_price_html).show():h.hide(),f.data("min-price",minimum_price).slideDown("200"),a(this).find("#product-addons-total").data("price",minimum_price),a(this).trigger("woocommerce-product-addons-update")):(e.html(j),f.slideUp("200"))}).on("reset_image",function(a){e.html(j),f.slideUp("200")}).on("click",".reset_variations",function(a){e.html(j),f.slideUp("200")}),a(this).find(".variations select").trigger("change")}},a("body").on("quick-view-displayed",function(){a("body").find(".cart:not(.cart_group)").each(function(){a(this).woocommerce_nyp_update()})}),a("body .component").on("wc-composite-component-loaded",function(){a(this).find(".cart:not(.cart_group)").each(function(){a(this).woocommerce_nyp_update()})}),a("body").find(".cart:not(.cart_group)").each(function(){a(this).woocommerce_nyp_update()})});