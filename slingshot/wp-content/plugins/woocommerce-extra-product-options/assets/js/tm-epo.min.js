!function(t){"use strict";function e(e,a){var i;return i=t(e).is(".cpf_hide_element")?t(e):t(e).closest(".cpf_hide_element"),!1!==t(i).data("isactive")&&!1!==t(i).closest(".cpf-section").data("isactive")?(t(e).prop("disabled",!1),"yes"!==tm_epo_js.tm_epo_show_only_active_quantities?t(e).is(":radio")?t(e).is(":checked")?t(e).find(".tm-qty").prop("disabled",!1):t(e).find(".tm-qty").prop("disabled",!0):i.find(".tm-qty").prop("disabled",!1):a||i.find(".tm-quantity").trigger("showhide.cpfcustom"),!0):(t(e).is(".cpf_hide_element")||(t(e).prop("disabled",!0),i.find(".tm-qty").prop("disabled",!0)),!1)}function a(t){var e;if(void 0!==t.per_product_pricing)e=t.per_product_pricing;else if(void 0!==t.is_priced_individually)for(var a in t.is_priced_individually)if("yes"==(e=t.is_priced_individually[a]))return!0;return!0===e}function i(a){t(a).length||(a="body");var i=(a=t(a)).find(".iscpfdependson");i.each(function(e,a){t(a).each(function(e,a){o(t(a))})}),i.each(function(e,a){t(a).each(function(e,a){o(t(a),"cpflogic")})}),i.each(function(a,i){t(i).each(function(a,i){(i=t(i)).is(".cpf-section")&&(i=i.find(".cpf_hide_element")),i.each(function(a,i){e(t(i).find(".tm-epo-field"))})})}),t().selectric&&t(".tm-extra-product-options select").selectric("refresh"),t(".tm-owl-slider").each(function(){t(this).trigger("refresh.owl.carousel")});var r=[];a.find(".tm-product-image:checked,select.tm-product-image").each(function(){var a=t(this);e(a)&&""!==a.val()&&r.push(a)}),r.length&&r[r.length-1].trigger("tm_trigger_product_image"),X.trigger("cpflogicrun"),X.trigger("tmlazy"),X.trigger("cpflogicdone")}function o(a,i){a.each(function(a,o){var r=t(this),c=r.data("matches"),d=r.data("toggle"),s=r.data("what"),l=r.data("fields"),p=0,m=!1;switch(d){case"show":m=!1;break;case"hide":m=!0}t.each(l,function(a,o){var r=!0;"cpflogic"==i&&(r=e(t(o.element))),r&&n(o)&&p++}),"all"==s?c==p&&(m=!m):p>0&&(m=!m),m?r.removeClass("tc-hidden"):r.addClass("tc-hidden"),r.data("isactive",m)})}function r(a,i){var o,r=!0,n=a.find(".cpf_hide_element");return t(n).each(function(a,n){if(n=t(n),e(n)){var c=n.attr("class").split(" ").map(function(t){if(-1!==t.indexOf("cpf-type-",0))return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(c.length>0){switch(c=c[0]){case"cpf-type-radio":var s=n.find("input.tm-epo-field.tmcp-radio:checked");"isnotempty"==i?r=r&&s.length>0:"isempty"==i&&(r=r&&0===s.length);break;case"cpf-type-checkbox":var l=n.find("input.tm-epo-field.tmcp-checkbox:checked");"isnotempty"==i?r=r&&l.length>0:"isempty"==i&&(r=r&&0===l.length);break;case"cpf-type-select":var p=n.find("select.tm-epo-field.tmcp-select").children("option"),m=n.find("select.tm-epo-field.tmcp-select").children("option:selected"),_=p.index(m);""===p.eq(0).val()&&""===p.eq(0).attr("data-rulestype")&&(_-=1);var f="_"+_;f=f.length,(o=n.find("select.tm-epo-field.tmcp-select").val())&&(o=o.slice(0,-f));break;case"cpf-type-textarea":o=n.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":o=n.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-color":o=n.find("input.tm-epo-field.tm-color-picker").val();break;case"cpf-type-range":o=n.find("input.tm-epo-field.tmcp-range").val()}r=r&&d(o,"",i)}else r=r&&!1}}),r}function n(e){var a,i,o,n=t(e.element),s=e.operator,l=e.value;if(!n.length)return!1;if(n.is(".cpf-section"))return r(n,s);var p=n.attr("class").split(" ").map(function(t){if(-1!==t.indexOf("cpf-type-",0))return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(p.length>0){switch(p=p[0]){case"cpf-type-radio":var m=n.find("input.tm-epo-field.tmcp-radio"),_=n.find("input.tm-epo-field.tmcp-radio:checked");if("is"==s||"isnot"==s){if(0===_.length)return!1;i=m.index(_),o=(o="_"+i).length,(a=n.find("input.tm-epo-field.tmcp-radio:checked").val())&&(a=a.slice(0,-o))}else{if("isnotempty"==s)return _.length>0;if("isempty"==s)return 0===_.length}break;case"cpf-type-checkbox":var f=n.find("input.tm-epo-field.tmcp-checkbox"),u=n.find("input.tm-epo-field.tmcp-checkbox:checked");if("is"==s||"isnot"==s){if(0===u.length)return!1;var g=!1;return u.each(function(e,r){if(i=f.index(t(r)),o="_"+i,o=o.length,(a=t(r).val())&&(a=a.slice(0,-o)),d(a,l,s))g=!0;else if("isnot"==s)return g=!1,!1}),g}if("isnotempty"==s)return u.length>0;if("isempty"==s)return 0===u.length;break;case"cpf-type-select":var h=n.find("select.tm-epo-field.tmcp-select").children("option"),v=n.find("select.tm-epo-field.tmcp-select").children("option:selected");i=h.index(v),""===h.eq(0).val()&&""===h.eq(0).attr("data-rulestype")&&(i-=1),o=(o="_"+i).length,(a=n.find("select.tm-epo-field.tmcp-select").val())&&(a=a.slice(0,-o));break;case"cpf-type-textarea":a=n.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":a=n.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-color":a=n.find("input.tm-epo-field.tm-color-picker").val();break;case"cpf-type-range":a=n.find("input.tm-epo-field.tmcp-range").val();break;case"cpf-type-variations":return c(n,l,s)}return d(a,l,s)}return!1}function c(e,a,i){null!==e&&null!==a&&(a=a?parseInt(a):-1);var o,r=t(e).closest(".variations_form"),n='input[name^="variation_id"]';switch(r.find("input.variation_id").length>0&&(n="input.variation_id"),o=parseInt(r.find(n).val()),isNaN(o)&&(o=""),isNaN(a)&&(a=""),i){case"is":return""!==o&&o==a;case"isnot":return""!==o&&o!=a;case"isempty":return""===o||0===o;case"isnotempty":return""!==o&&0!==o;case"startswith":return o.startsWith(a);case"endswith":return o.endsWith(a);case"greaterthan":return parseFloat(o)>parseFloat(a);case"lessthan":return parseFloat(o)<parseFloat(a)}return!1}function d(e,a,i){switch(null!==e&&null!==a&&(e=encodeURIComponent(e),a=t.qtranxj_split?encodeURIComponent(t.qtranxj_split(decodeURIComponent(a))[tm_epo_q_translate_x_clogic_js.language]):encodeURIComponent(decodeURIComponent(a)),e=e?e.toLowerCase():"",a=a?a.toLowerCase():""),i){case"is":return null!==e&&e==a;case"isnot":return null!==e&&e!=a;case"isempty":return!(void 0!==e&&""!==e);case"isnotempty":return void 0!==e&&""!==e;case"startswith":return e.startsWith(a);case"endswith":return e.endsWith(a);case"greaterthan":return parseFloat(e)>parseFloat(a);case"lessthan":return parseFloat(e)<parseFloat(a)}return!1}function s(e){if(0!==t(e).length){if(t(e).is(".cpf-section"))return e.find(".tm-epo-field");var a=e.attr("class").split(" ").map(function(t){if(-1!==t.indexOf("cpf-type-",0))return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(a.length>0)switch(a=a[0]){case"cpf-type-radio":return e.find(".tm-epo-field.tmcp-radio");case"cpf-type-checkbox":return e.find(".tm-epo-field.tmcp-checkbox");case"cpf-type-select":return e.find(".tm-epo-field.tmcp-select");case"cpf-type-textarea":return e.find(".tm-epo-field.tmcp-textarea");case"cpf-type-textfield":return e.find(".tm-epo-field.tmcp-textfield");case"cpf-type-color":return e.find(".tm-epo-field.tm-color-picker");case"cpf-type-range":return e.find(".tm-epo-field.tmcp-range");case"cpf-type-date":return e.find(".tm-epo-field.tmcp-date");case"cpf-type-variations":return e.closest(".cpf-section").find(".tm-epo-field.tm-epo-variation-element")}else;}}function l(t){return"object"==typeof t&&"toggle"in t&&"what"in t&&"rules"in t&&t.rules.length>0}function p(e){var a,i=t(e),o=i.find(".cpf-section");a=!i.is(".cpf-section")&&o,i.each(function(e,o){(t(o).is(".cpf-section")?t(o):t(o).find(".cpf-section")).each(function(e,o){var r=t(o),n=r.data("logic"),c=[];1==parseInt(r.data("haslogic"))&&l(n)&&(t.each(n.rules,function(t,e){if(e){var o,r,n=e.section,d=e.element,s=e.operator,l=e.value;a?(o=a.filter('[data-uniqid="'+n+'"]'),r=d!=n?o.find(".cpf_hide_element").eq(d):o):r=d!=n?i.find(".cpf_hide_element").eq(d):o,c.push({element:r,operator:s,value:l})}}),r.data("iscpfdependson")?r.cpfdependson(r.data("cpfdependson-fields"),n.toggle,n.what,!0):(r.data("cpfdependson-fields",c),r.cpfdependson(c,n.toggle,n.what)))})})}function m(e){var a,i=t(e),o=i.find(".cpf-section");a=!i.is(".cpf-section")&&o,i.find(".cpf_hide_element").each(function(e,o){var r=t(o),n=r.data("logic");if(1==parseInt(r.data("haslogic"))&&l(n)){var c=[];t.each(n.rules,function(t,e){if(e){var o,r,n=e.section,d=e.element,s=e.operator,l=e.value;a?(o=a.filter('[data-uniqid="'+n+'"]'),r=d!=n?o.find(".cpf_hide_element").eq(d):o):r=d!=n?i.find(".cpf_hide_element").eq(d):o,c.push({element:r,operator:s,value:l})}}),r.data("iscpfdependson")?r.cpfdependson(r.data("cpfdependson-fields"),n.toggle,n.what,!0):(r.data("cpfdependson-fields",c),r.cpfdependson(c,n.toggle,n.what))}})}function _(t,e,a,i){if(isNaN(parseFloat(t))&&(t=0),t*=1e4,e){var o=e.attr("data-taxable"),r=e.attr("data-tax-rate"),n=e.attr("data-base-tax-rate"),c=e.attr("data-prices-include-tax"),d=e.attr("data-is-vat-exempt"),s=e.attr("data-non-base-location-prices"),l=e.attr("data-base-taxes-of-one"),p=e.attr("data-modded-taxes-of-one");if(void 0!==e.data("current_variation")){var m=e.data("current_variation");o=m.tc_is_taxable,r=m.tc_tax_rate,n=m.tc_base_tax_rate,s=m.tc_non_base_location_prices,l=m.tc_base_taxes_of_one,p=m.tc_modded_taxes_of_one}a&&a.data("tax-obj")&&("no"===(r=a.data("tax-obj")).has_fee?o=!1:"yes"===r.has_fee&&(o=!0),n=r=r.tax_rate),o&&("1"!=c||i?t=parseFloat(t)*(1+r/100):"1"==d?t=parseFloat(t)*(1-n/100):"1"==s&&(t=parseFloat(t)-l*t+p*t))}return t/=1e4}function f(t,e,a,i){if(isNaN(parseFloat(t))&&(t=0),t*=1e4,e){var o=e.attr("data-taxable"),r=e.attr("data-tax-rate"),n=e.attr("data-base-taxes-of-one"),c=e.attr("data-prices-include-tax");if(void 0!==e.data("current_variation")){var d=e.data("current_variation");o=d.tc_is_taxable,r=d.tc_tax_rate,n=d.tc_base_taxes_of_one}a&&a.data("tax-obj")&&("no"===(r=a.data("tax-obj")).has_fee?o=!1:"yes"===r.has_fee&&(o=!0),r=r.tax_rate),(o&&"1"==c||i)&&(t=parseFloat(t)-parseFloat(n*t))}return t/=1e4}function u(t,e,a){return isNaN(parseFloat(t))&&(t=0),e&&(t="incl"==e.attr("data-tax-display-mode")?_(t,e,a):f(t,e,a)),t}function g(t,e,a){if(e){var i=e.attr("data-taxable"),o=e.attr("data-tax-rate"),r=e.attr("data-tax-display-mode"),n=e.attr("data-prices-include-tax");i&&("excl"==r||"1"==n||(t=parseFloat(t)/(1+o/100)))}return t}function h(t,e,a,i,o){a||(t=u(t,e,o));var r="";return e&&i&&(r=e.attr("data-tax-string")),void 0===r&&(r=""),accounting.formatMoney(t,{symbol:tm_epo_js.currency_format_symbol,decimal:N,thousand:T,precision:tm_epo_js.currency_format_num_decimals,format:tm_epo_js.currency_format})+r}function v(e,a,i,o,r){var n=t(e);if(0!==n.length){var c=n.closest(".tmcp-field-wrap"),d=c.find(".before-amount,.after-amount"),s={price:i,original_price:r};if("yes"==tm_epo_js.tm_epo_auto_hide_price_if_zero&&!1===t.tmempty(a)||"yes"!=tm_epo_js.tm_epo_auto_hide_price_if_zero){var l=c.find(".tm-epo-field");l.length>0&&l.is(".tmcp-select")&&""===l.val()?(n.empty(),d.addClass("tm-hidden")):(o&&void 0!==o&&parseFloat(o)!==parseFloat(a)?n.html(t.fn.tm_template(B.sale_price,{price:s})):n.html(t.fn.tm_template(B.price,{price:s})),d.removeClass("tm-hidden"))}else n.empty(),d.addClass("tm-hidden")}}function b(t,e,a){I[I.length]={name:t,selector:e,func:a}}function y(e){var a={};return e.find(".variations select").each(function(){var e,i;e=void 0!==t(this).data("attribute_name")?t(this).data("attribute_name"):t(this).attr("name"),i=t(this).val(),a[e]=i}),a}function w(e,a){var i=[];if(e.find(".cpf-type-variations").each(function(o,r){i[o]=!0;var n,c,d=t(r).find(".tm-epo-variation-element"),s=!1;d.is("select")?(n=d.attr("data-tm-for-variation").tmjid(),(c=d.val())&&(i[o]=!1),d.children("option").each(function(a,i){s=!1,e.find("#"+n).children("option").each(function(){if(t(this).attr("value")==t(i).attr("value"))return s=!0,!1}),s?t(i).removeAttr("disabled").show():t(i).attr("disabled","disabled").hide()})):d.each(function(r,d){var s=(d=t(d)).closest("li"),l=s.find(".tm-epo-variation-element");n=d.attr("data-tm-for-variation"),c=d.val(),d.is(":checked")&&(i[o]=!1);var p=y(e);p["attribute_"+n]=c;var m=t.fn.tm_find_matching_variations(a,p).shift(),_=m&&"is_in_stock"in m&&m.is_in_stock;m&&_?(d.removeAttr("disabled").removeClass("tm-disabled"),s.removeClass("tm-attribute-disabled").fadeTo("fast",1,function(){t(this).css("opacity","")}),l.removeAttr("disabled"),l.removeAttr("data-tm-disabled")):(d.attr("disabled","disabled").addClass("tm-disabled"),l.attr("disabled","disabled"),l.attr("data-tm-disabled","disabled"),s.addClass("tm-attribute-disabled").fadeTo("fast",.5),_||s.find("label").off())})}),i){i.shift();var o=!0;t.each(i,function(t,e){if(!1===e)return o=!1,!1}),o&&e.find(".cpf-type-variations").first().each(function(e,a){var i=t(a).find(".tm-epo-variation-element");i.is("select")||i.each(function(e,a){var i=(a=t(a)).closest("li"),o=i.find(".tm-epo-variation-element");a.removeAttr("disabled").removeClass("tm-disabled"),i.removeClass("tm-attribute-disabled").stop().css("opacity",""),o.removeAttr("disabled"),o.removeAttr("data-tm-disabled")})})}}function k(e){var a=e.data("product_variations"),i=parseInt(e.data("product_id"));if(i||(i=e.data("tc_product_id")),!a&&window.product_variations&&window.product_variations.product_id&&(a=window.product_variations.product_id),!a&&window.product_variations&&(a=window.product_variations),!a&&window["product_variations_"+i]&&(a=window["product_variations_"+i]),a)w(e,a);else if(D)w(e,D.variations);else{var o={action:"woocommerce_tm_get_variations_array",post_id:i};t.post(tm_epo_js.ajax_url,o,function(t){w(e,(D=t).variations)},"json")}}function x(e,a){if(void 0===a)return!1;var i=(e=t(e)).find(".tm-epo-variation-element"),o=i.closest(".tm-epo-variation-section");return i.length?(o.find(".tm-stock").remove(),o.append('<div class="tm-stock">'+a+"</div>"),!0):(e.find(".tm-stock").remove(),e.find(".variations").after('<div class="tm-stock">'+a+"</div>"),!0)}function j(t,e){if("no"!=tm_epo_js.tm_epo_global_move_out_of_stock){var a=t.find(".woocommerce-variation-availability").last();a.length||(a=t.find(".stock").last()),a.length?(e.find(".tm-stock").remove(),x(e,a.prop("outerHTML"))&&a.remove()):e.find(".tm-stock").remove()}}function q(o,r,c,d){function s(e){e||(e=Ut),e.find(".tm-range-picker").each(function(a,i){var o=(i=t(i)).attr("data-step").split("."),r=e.find("#"+i.attr("data-field-id").tmjid()),n=parseFloat(i.attr("data-min")),c=parseFloat(i.attr("data-max")),d=parseFloat(i.attr("data-start")),s=parseFloat(i.attr("data-step")),l=i.attr("data-show-picker-value"),p=i.closest("li").find(".tm-show-picker-value"),m=parseFloat(i.attr("data-noofpips")),_=null;o=1==o.length?0:o[1].length,isNaN(n)&&(n=0),isNaN(c)&&(c=0),c<=n&&c++,isNaN(d)&&(d=0),isNaN(s)&&(s=0),isNaN(m)&&(m=10),"yes"==i.attr("data-pips")&&(_={mode:"count",values:m,density:2,filter:function(t,e){return s<=0?0:t%1?2:1},stepped:!0,format:wNumb({decimals:o})}),noUiSlider.create(i.get(0),{direction:tm_epo_js.text_direction,start:d,step:s,connect:"lower",behaviour:"tap",format:wNumb({mark:".",decimals:o,thousand:""}),range:{min:[n],max:[c]},pips:_});var f=i.find(".noUi-handle-lower");i.get(0).noUiSlider.on("slide",function(){f.trigger("tmmovetooltip"),r.trigger("change.cpf")}),i.get(0).noUiSlider.on("update",function(t,e){e=0,"left"!=l&&"right"!=l&&f.attr("title",accounting.formatNumber(t[e],{decimal:N,thousand:T,precision:o})),r.val(t[e]).change(),""!==l&&p.html(accounting.formatNumber(t[e],{decimal:N,thousand:T,precision:o}))}),"left"!=l&&"right"!=l&&(f.attr("title",i.attr("data-start")),t.tm_tooltip(f)),""!==l&&p.html(d)})}function l(e){function a(e,a){a=t(a);var i,o=t.tm_datepicker._getInst(a[0]),r=a.data("tc-enabled_only_dates"),n=a.data("tc-disabled_weekdays"),c=a.data("tc-disabled_dates"),d=a.data("tc-format"),s=e.getDay();return!!t.tm_datepicker._isInRange(o,e)&&(""!==r?(i=t.tm_datepicker.formatDate(d,e),-1!=r.indexOf(i)):-1==n.indexOf(s.toString())&&(""===c||(i=t.tm_datepicker.formatDate(d,e),-1==c.indexOf(i))))}if(t.tm_datepicker){e||(e=Ut);var i=t("input").map(function(){return this.id}).get().join(" ");e.find(".tm-epo-timepicker").each(function(e,a){var o=t(a),r=""!==o.attr("data-min-time").trim()?o.attr("data-min-time").trim():null,n=""!==o.attr("data-max-time").trim()?o.attr("data-max-time").trim():null,c=o.attr("data-time-format").trim(),d=o.attr("data-time-theme").trim(),s=o.attr("data-time-theme-size").trim(),l=o.attr("data-time-theme-position").trim(),p=o.attr("data-tranlation-hour").trim(),m=o.attr("data-tranlation-minute").trim(),_=o.attr("data-tranlation-second").trim();""!==o.attr("data-custom-time-format").trim()&&(c=o.attr("data-custom-time-format").trim()),p||(p=tm_epo_js.hourText),m||(m=tm_epo_js.minuteText),_||(_=tm_epo_js.secondText),o.tm_timepicker({isRTL:tm_epo_js.isRTL,hourText:p,minuteText:m,secondText:_,timeFormat:c,minTime:r,maxTime:n,closeText:tm_epo_js.closeText,beforeShow:function(e,a){t(a.dpDiv).removeClass(i).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+d+" tm-timepicker tm-datepicker tm-datepicker-"+l+" tm-datepicker-"+s).appendTo("body"),$.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){o.tm_timepicker("hide")}),t("body").addClass("tm-static"),o.prop("readonly",!0),X.trigger({type:"tm-timepicker-beforeShow",input:e,inst:a})},onClose:function(e,a){t("body").removeClass("tm-static"),o.prop("readonly",!1),o.trigger("change")}}),t("#ui-tm-datepicker-div").hide()}),e.find(".tm-epo-datepicker").each(function(a,o){var r=t(o),n=parseInt(r.attr("data-start-year").trim()),c=parseInt(r.attr("data-end-year").trim()),d=r.attr("data-min-date").trim(),s=r.attr("data-max-date").trim(),l=r.attr("data-disabled-dates").trim(),p=r.attr("data-enabled-only-dates").trim(),m=r.attr("data-disabled-weekdays").trim().split(","),_=r.attr("data-date-format").trim(),f=r.attr("data-date-showon").trim(),u=r.attr("data-date-defaultdate").trim(),g=r.attr("data-date-theme").trim(),h=r.attr("data-date-theme-size").trim(),v=r.attr("data-date-theme-position").trim();if(""!==l){var b=l.split(",");-1!=l.indexOf(",")&&b.length>0&&(l=b)}if(""!==p){var y=p.split(",");-1!=p.indexOf(",")&&y.length>0&&(p=y)}d=""===d?""===n?null:new Date(n,0,1):d.tm_isNumeric()||isNaN(new Date(d).getTime())?d:new Date(d),s=""===s?""===c?null:new Date(c,11,31):s.tm_isNumeric()||isNaN(new Date(s).getTime())?s:new Date(s),r.data("tc-enabled_only_dates",p),r.data("tc-disabled_weekdays",m),r.data("tc-disabled_dates",l),r.data("tc-format",_),r.tm_datepicker({monthNames:tm_epo_js.monthNames,monthNamesShort:tm_epo_js.monthNamesShort,dayNames:tm_epo_js.dayNames,dayNamesShort:tm_epo_js.dayNamesShort,dayNamesMin:tm_epo_js.dayNamesMin,isRTL:tm_epo_js.isRTL,showOtherMonths:!0,selectOtherMonths:!0,showOn:f,defaultDate:u,buttonText:"",showButtonPanel:!0,firstDay:tm_epo_js.first_day,closeText:tm_epo_js.closeText,currentText:tm_epo_js.currentText,dateFormat:_,minDate:d,maxDate:s,onSelect:function(a,i){var o=t(this),r="#"+o.attr("id").tmjid(),n=o.attr("data-date-format"),c=o.tm_datepicker("getDate"),d="",s="",_="",f=e.find(r+"_day"),u=e.find(r+"_month"),g=e.find(r+"_year");if(c){d=c.getDate(),s=c.getMonth()+1,_=c.getFullYear();var h=t.tm_datepicker.formatDate(n,c);if(-1!=m.indexOf(c.getDay().toString())||-1!=l.indexOf(h)||""!==p&&-1==p.indexOf(h)){var v=o.data("tm-last-date");v=o.data("tm-last-date")?o.data("tm-last-date"):"",o.val(v),o.tm_datepicker("setDate",v),v?(d=(c=o.tm_datepicker("getDate")).getDate(),s=c.getMonth()+1,_=c.getFullYear()):(d="",s="",_="")}}f.val(d),u.val(s),g.val(_),o.data("tm-last-date",o.val())},beforeShow:function(e,a){t(a.dpDiv).removeClass(i).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+g+" tm-datepicker tm-datepicker-"+v+" tm-datepicker-"+h).appendTo("body"),$.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){r.tm_datepicker("hide")}),t("body").addClass("tm-static"),r.prop("readonly",!0),X.trigger({type:"tm-datepicker-beforeShow",input:e,inst:a})},onClose:function(e,a){t("body").removeClass("tm-static"),r.prop("readonly",!1),r.trigger("change")},beforeShowDay:function(e){var a,i=e.getDay();return""!==p?(a=t.tm_datepicker.formatDate(_,e),[-1!=p.indexOf(a),""]):-1!=m.indexOf(i.toString())?[!1,""]:""!==l?(a=t.tm_datepicker.formatDate(_,e),[-1==l.indexOf(a),""]):[!0,""]}}),t("#ui-tm-datepicker-div").hide()}),e.find(".tmcp-date-select").on("change.cpf",function(a){var i="#"+t(this).attr("data-tm-date").tmjid(),o=e.find(i),r=o.attr("data-date-format"),n=e.find(i+"_day").val(),c=e.find(i+"_month").val(),d=e.find(i+"_year").val(),s=t.tm_datepicker.formatDate(r,new Date(d,c-1,n));n>0&&c>0&&d>0?(o.tm_datepicker("setDate",s),o.trigger("change")):(o.val(""),o.trigger("change.cpf"))}).on("focus.cpf",function(i){var o="#"+t(this).attr("data-tm-date").tmjid(),r=e.find(o),n=e.find(o+"_day"),c=e.find(o+"_month"),d=e.find(o+"_year"),s=n.val(),l=c.val(),p=d.val();if(""!==p&&""!==l&&""!==s||""!==p&&""!==l&&""===s||""!==s&&""!==p&&""===l||""!==s&&""!==l&&""===p){var m=t(this);m.find("option").each(function(){var e=t(this),i=e.val(),o=p+"-"+l+"-"+s;if(m.is(".tmcp-date-day")){if(""===p||""===l)return;o=p+"-"+l+"-"+i}else if(m.is(".tmcp-date-month")){if(""===p||""===s)return;o=p+"-"+i+"-"+s}else if(m.is(".tmcp-date-year")){if(""===s||""===l)return;o=i+"-"+l+"-"+s}if(""!==i)try{var n=t.tm_datepicker.parseDate("yy-mm-dd",o);n&&(a(n,r)?e.prop("disabled",!1):e.prop("disabled",!0))}catch(t){e.prop("disabled",!0)}})}else n.find("option").prop("disabled",!1),c.find("option").prop("disabled",!1),d.find("option").prop("disabled",!1)}),t(window).on("resizestart",function(){var e=t(document.activeElement);if(e.is(".hasDatepicker")){if(e.data("resizestarted",!0),t(window).width()<768)return void e.data("resizewidth",!0);e.tm_datepicker("hide")}}),t(window).on("resizestop",function(){var e=t(document.activeElement);e.is(".hasDatepicker")&&e.data("resizestarted")&&(e.data("resizewidth")&&e.tm_datepicker("hide"),e.tm_datepicker("show")),e.data("resizestarted",!1),e.data("resizewidth",!1)})}}function b(e){if("yes"==tm_epo_js.tm_epo_global_enable_validation){var a={};return Ut.find(".tmcp-ul-wrap").each(function(e,i){var o=(i=t(i)).data("tm-validation");if(o&&"object"===t.tmType(o)){var r=i.find(".tm-epo-field"),n=r.first().attr("name");i.is(".tm-extra-product-options-radio.tm-element-ul-radio")&&(n=r.last().attr("name")),i.is(".tm-extra-product-options-checkbox.tm-element-ul-checkbox")?r.each(function(e,n){"required"in o&&(o.required=function(e){var a=i.find("input.tm-epo-field.tmcp-checkbox:checked").length;return 0===a?r.last().attr("name")==t(e).attr("name"):a<=0}),a[t(n).attr("name")]=o}):a[n]=o}}),e.removeData("tc_validator"),e.tc_validate({focusInvalid:!1,ignore:P+",#wc_bookings_field_duration,input.tm-qty:hidden[type='number'],input.input-text.qty,.ignore,.variations select,.tm-extra-product-options-variations input,.tm-extra-product-options-variations select,input:not(.tc-extra-product-options input),select:not(.tc-extra-product-options select)",rules:a,errorClass:"tm-error",validClass:"tm-valid",errorElement:"label",errorPlacement:function(t,e){return e.is(".tm-epo-field.tmcp-radio")||e.is(".tm-epo-field.tmcp-checkbox")||e.is(".tm-epo-field.tmcp-radio")?t.appendTo(e.closest(".tmcp-ul-wrap").parent()):t.appendTo(e.closest(".tmcp-field-wrap")),!1},invalidHandler:function(e,a){setTimeout(function(){o.find(R).first().removeClass("disabled").removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled"),t.tcepo.temp_floatbox&&"object"==typeof t.tcepo.temp_floatbox&&t.tcepo.temp_floatbox.cancelfunc()},100),a.errorList&&a.errorList[0]&&a.errorList[0].element&&V(t(a.errorList[0].element))},submitHandler:function(t){return o.find(R).first().addClass("disabled"),y()}}),!0}return!1}function y(e){var a,i,r=!0;for(i=0;i<St.length;i++)if(a=St[i],!("object"!=typeof a||"function"!=typeof a.trigger||a.trigger())){r=!1;break}for(i=0;i<St.length;i++)"object"==typeof(a=St[i])&&(r?a.on_true():a.on_false());return r||setTimeout(function(){o.find(R).first().removeClass("disabled").removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled"),t.tcepo.temp_floatbox&&"object"==typeof t.tcepo.temp_floatbox&&t.tcepo.temp_floatbox.cancelfunc()},100),r}function w(t,e,a){return x(t,e,a)}function x(t,e,a){return e||(e="form"),q(t,a).closest(e)}function q(t,e){var a="";e&&(a=a+'[value="'+e+'"]'),t||(t=o);var i=t.find(M+a);return 0===i.length&&(i=t.find(E+a)),i.last()}function F(){var e=x(),a=e.find(".wc-bookings-booking-form"),i=a.find(".tm-epo-counter");if(i.length>0){e.on("submit",function(){e.find(R).first().addClass("disabled")}),"woocommerce_before_add_to_cart_button"==tm_epo_js.tm_epo_totals_box_placement&&t(".wc-bookings-booking-form-button").before(Zt),Wt.data("tc_is_bookings",1),Wt.data("bookings_form",a),Wt.data("bookings_form_init",0),Wt.data("price",0),Zt.find(".cpf-product-price").val(0);for(var o=findEventHandlers("change",i),r=!1,n=!1,s=o.length-1;s>=0&&!0!==n;s--)if(o[s].events)for(var l=o[s].events.length-1;l>=0;l--)if(o[s].events[l].selector&&"input, select"==o[s].events[l].selector){r=o[s].events[l].handler,n=!0;break}if($.ajaxSuccess(function(t,e,a){if(a.data&&e&&e.responseText){var i=a.data.tmparseParams();i.action&&"wc_bookings_get_blocks"==i.action&&(Wt.data("price",0),Zt.find(".cpf-product-price").val(0),Tt.trigger({type:"tm-epo-update",product_false:!0}))}}),!1!==r&&n){var p=i.closest(".wc-bookings-booking-form");p.off("change","input, select",r).on("change.tcbookings","input, select",function(a){var i=t(this),o=t(this).closest("form"),r=o.find("input.required_for_calculation"),n=!0;if(t.each(r,function(e,a){t(a).val()||(n=!1)}),n)if(!b(e)||e.tc_validate().form()){a.stopImmediatePropagation();var d={action:"tc_epo_bookings_calculate_costs",form:o.serialize(),post_id:c};t.post(tm_epo_js.ajax_url,d,function(t){t&&"SUCCESS"==t.result&&"product_price"in t?(Wt.data("price",t.product_price),Zt.find(".cpf-product-price").val(t.product_price),Wt.data("bookings_form_init",1),Tt.trigger({type:"tm-epo-update"}),i.trigger("tc_bookings_change")):t&&"ERROR"==t.result&&(Wt.data("bookings_form_init",0),o.find(".wc-bookings-booking-cost").show().html(t.html))},"json")}else a.stopImmediatePropagation()}),p.on("change tc_bookings_change","input, select",r)}}Dt||i.length>0&&(Ut.find(".tm-epo-field").not(".tm-epo-counter").off("change.tcbookings").on("change.tcbookings",function(t){i.trigger("change")}),t.ajaxPrefilter(function(e,a,i){if("post"===e.type.toLowerCase()&&a.data&&a.data.action&&"wc_bookings_calculate_costs"==a.data.action&&a.data.form){var o=t(L+".tm-cart-main.tm-product-id-"+c+'[data-epo-id="'+d+'"]');if(1==o.length){var r=a.data.form.tmparseParams(!0);r=t.extend(r,o.tm_aserializeObject()),a.data.form=t.param(r,!1),e.data=t.param(t.extend(a.data,{}),!1)}}}))}function z(){if(At&&"yes"==tm_epo_js.tm_epo_hide_add_cart_button){var t=o.find(R).first();Mt?t.removeClass("tc-hide-add-to-cart-button"):t.addClass("tc-hide-add-to-cart-button")}}function C(e,a){var i,o=parseInt(e.attr("data-limit")),r=!1;return!(o>0&&(r=0,e.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e=t(this).closest("li.tmcp-field-wrap").find("input.tm-qty");e.length>0?((i=parseInt(e.val()))<=0&&(i=1),r+=i):r+=1}),r>o))||(a&&e.prop("checked","").trigger("change"),!1)}function D(e,a){var i,o=parseInt(e.attr("data-limit")),r=!1;return!((o=parseInt(e.attr("data-exactlimit")))>0&&(r=0,e.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e=t(this).closest("li.tmcp-field-wrap").find("input.tm-qty");e.length>0?((i=parseInt(e.val()))<=0&&(i=1),r+=i):r+=1}),r>o)&&(a&&e.prop("checked","").trigger("change"),1))}function Q(a){var i=!0,r=!1;return a.each(function(){var a=t(this).find("[type='checkbox'][data-exactlimit]");if(a.length&&e(a)){var n=parseInt(a.attr("data-exactlimit")),c=0;t(this).find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e,a=t(this).closest("li.tmcp-field-wrap").find("input.tm-qty");a.length>0?((e=parseInt(a.val()))<=0&&(e=1),c+=e):c+=1});var d=t(this).closest(".cpf_hide_element").find("div.tm-error-min");if(n!==c){i=!1,r=t(this);var s=tm_epo_js.tm_epo_global_validator_messages.epoexact.replace("{0}",n);d.length&&d.remove(),t(this).after('<div class="tm-error-min tm-error">'+s+"</div>"),o.find(R).first().removeClass("disabled").removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled")}else d.remove()}}),r&&(Ot=r),i}function Y(e){St[St.length]={trigger:function(){return Q(e)},on_true:function(){return!0},on_false:function(){return V(t(e).find(".tm-epo-field").first()),!0}}}function J(a){var i=!0,o=!1;return a.each(function(){var a=t(this).find("[type='checkbox'][data-minimumlimit]");if(a.length&&e(a)){var r=parseInt(a.attr("data-minimumlimit")),n=0;t(this).find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e,a=t(this).closest("li.tmcp-field-wrap").find("input.tm-qty");a.length>0?((e=parseInt(a.val()))<=0&&(e=1),n+=e):n+=1});var c=t(this).closest(".cpf_hide_element").find("div.tm-error-min");if(r>n){i=!1,o=t(this);var d=tm_epo_js.tm_epo_global_validator_messages.epomin.replace("{0}",r);c.length&&c.remove(),t(this).after('<div class="tm-error-min tm-error">'+d+"</div>")}else c.remove()}}),o&&(Ot=o),i}function K(t){St[St.length]={trigger:function(){return J(t)},on_true:function(){return!0},on_false:function(){return V(),!0}}}function V(e){var a=Ot||e;if(a){if("yes"!==tm_epo_js.tm_epo_disable_error_scroll){var i=a.closest(".cpf-section"),o=i.find(".tm-section-link"),r=a.closest(".cpf_hide_element");if(i.find(".tm-toggle").length&&i.find(".tm-toggle").trigger("openwrap.tmtoggle"),window.tc_validation_offset||(window.tc_validation_offset=-100),i.is(".section_popup"))t(window).tc_scrollTo(o,300,window.tc_validation_offset),o.trigger("click.tmsectionpoplink");else if(i.is(".tm-owl-slider-section")){var n=a.closest(".owl-item").index();i.find(".tcowl-carousel").trigger("to.owl.carousel",[n,100]),setTimeout(function(){i.find(".tcowl-carousel").trigger("refresh.owl.carousel"),r.length>0&&t(window).tc_scrollTo(r,300,window.tc_validation_offset)},200)}else r.length>0&&t(window).tc_scrollTo(r,300,window.tc_validation_offset)}e||(Ot=!1)}}function tt(){Wt.each(function(){var e=t(this).attr("data-cart-id"),a=o.find(".tm-extra-product-options.tm-cart-"+e),i=t(this).data("subscription-period"),r=t(this).data("variations-subscription-period"),n=a.find(".tmcp-field").closest(".tmcp-field-wrap");if(t(this).data("is-subscription")){n.find(".tmperiod").remove();var c=n.find(".amount").is(".hidden");c=c?" hidden":"";var d='input[name^="variation_id"]',s=t(this).data("tm_for_cart");if(s){s.find("input.variation_id").length>0&&(d="input.variation_id");var l=s.find(d).val();l||(l=0),r[l.tmtoFloat()]&&(i=r[l.tmtoFloat()])}void 0===window.subscription_period_separator&&(window.subscription_period_separator=" / "),n.find(".amount").after('<span class="tmperiod'+c+'">'+window.subscription_period_separator+i+"</span>"),t(this).find(".tmperiod").remove(),t(this).find(".amount.options").after('<span class="tmperiod">'+window.subscription_period_separator+i+"</span>"),t(this).find(".amount.final").after('<span class="tmperiod">'+window.subscription_period_separator+i+"</span>")}})}function et(e){var a=e.attr("data-container-id");return a||(a=t(e).closest(".composite_form").find(".composite_data").data("container_id")),a}function at(t){return o.find(".bto_form_"+t+",#composite_form_"+t+",#composite_data_"+t).data("price_data")}function it(t){return" .review .price_"+t+", .summary_element_"+t+" .summary_element_price"}function ot(t){return t.attr("data-item-id")||t.attr("data-item_id")}function rt(e,a,i,o){return"object"==typeof e&&(e=e[0],isNaN(parseFloat(e))&&(e=0)),t.tc_apply_filters("tc_apply_dpd",e,a,i,o)}function nt(e){return t.tc_apply_filters("tc_calculate_product_price",parseFloat(e.data("price")),e)}function ct(e,a){var i,r,n,c,d,s,l,p=t(e),m=p,_=!0,f=p.is(".tmcp-range");if(a)i=a.bto,r=a.cart,n=a.current_variation,c=a.is_bto,d=a.bundleid,s=a.totals,l=a.apply_dpd;else{i=p.closest(Lt);var g='input[name^="variation_id"]';(r=p.closest(".cart")).find("input.variation_id").length>0&&(g="input.variation_id"),n=r.find(g).val(),c=i.length>0,(d=r.attr("data-product_id"))||(d=r.closest(".component_content").attr("data-product_id"))||(d=0),n||(n=0),l=(s=c?o.find(".tm-epo-totals.tm-cart-"+d):Wt).data("fields-price-rules")}p.is("select")&&(m=p.find("option:selected"));var b,y,w,k,x,j,q,F,z,C,N,T,D=m.data("rules"),I=m.data("rulestype"),S=m.data("original-rules");if(void 0===S&&(S=D),c){var O=r.find(".cpf-bto-price");O.length>0&&(O.data("per_product_pricing")?z=O.val():(z=0,_=!1),O.val(z))}else s.length&&(z=nt(s));if(!1!==_)if(k="","object"==typeof D){switch(n in D?(x=D[n],j=S[n]):(b=p.closest(".tmcp-ul-wrap").data("rules"),w=p.closest(".tmcp-ul-wrap").data("original-rules"),x="object"==typeof b&&n in b?b[n]:D[0],j="object"==typeof w&&n in w?w[n]:S[0]),"object"==typeof I?k=n in I?I[n]:"object"==typeof(y=p.closest(".tmcp-ul-wrap").data("rulestype"))&&n in y?y[n]:I[0]:"object"==typeof(I=p.closest(".tmcp-ul-wrap").data("rulestype"))&&(k=n in I?I[n]:I[0]),"object"==typeof k&&(k=k[0]),p.is("select")?p.find("option").each(function(){var e=t(this);e.removeData("tm-price-for-late"),e.removeData("islate"),e.removeClass("tm-epo-late-field")}):(m.removeData("tm-price-for-late"),m.removeData("islate"),m.removeClass("tm-epo-late-field")),"fee"==k&&(l=0),k){case"":x=rt(x,s,l),j=rt(j,s,l);break;case"fee":x=x,j=j;break;case"percent":x=x/100*z,j=j/100*z;break;case"percentcurrenttotal":Xt.push({setter:m,price:x,bundleid:d}),m.data("tm-price-for-late",x).data("islate",1).addClass("tm-epo-late-field"),x=0,j=0;break;case"char":x=rt(x,s,l)*m.val().length,j=rt(j,s,l)*m.val().length;break;case"charpercent":x=x/100*z*m.val().length,j=j/100*z*m.val().length;break;case"charnospaces":x=rt(x,s,l)*m.val().replace(/\s/g,"").length,j=rt(j,s,l)*m.val().replace(/\s/g,"").length;break;case"charnofirst":(C=m.val().length-1)<0&&(C=0),x=rt(x,s,l)*C,j=rt(j,s,l)*C;break;case"charnon":N=parseInt(m.attr("data-freechars")),isNaN(N)&&(N=0),(C=m.val().length-N)<0&&(C=0),x=rt(x,s,l)*C,j=rt(j,s,l)*C;break;case"charpercentnon":N=parseInt(m.attr("data-freechars")),isNaN(N)&&(N=0),(C=m.val().length-N)<0&&(C=0),x=x/100*z*C,j=j/100*z*C;break;case"charnonnospaces":N=parseInt(m.attr("data-freechars")),isNaN(N)&&(N=0),(C=m.val().replace(/\s/g,"").length-N)<0&&(C=0),x=rt(x,s,l)*C,j=rt(j,s,l)*C;break;case"charpercentnonnospaces":N=parseInt(m.attr("data-freechars")),isNaN(N)&&(N=0),(C=m.val().replace(/\s/g,"").length-N)<0&&(C=0),x=x/100*z*C,j=j/100*z*C;break;case"charpercentnofirst":(C=m.val().length-1)<0&&(C=0),x=x/100*z*C,j=j/100*z*C;break;case"step":f?(x=rt(x,s,l)*m.val(),j=rt(j,s,l)*m.val()):(x=rt(x,s,l)*m.val().tmtoFloat(),j=rt(j,s,l)*m.val().tmtoFloat());break;case"stepfee":f?(x*=m.val(),j*=m.val()):(x*=m.val().tmtoFloat(),j*=m.val().tmtoFloat());break;case"currentstep":f?(x=rt(m.val(),s,l),j=rt(m.val(),s,l)):(x=rt(m.val().tmtoFloat(),s,l),j=rt(m.val().tmtoFloat(),s,l));break;case"currentstepfee":f?(x=m.val(),j=m.val()):(x=m.val().tmtoFloat(),j=m.val().tmtoFloat());break;case"intervalstep":f&&(T=parseFloat(t('.tm-range-picker[data-field-id="'+m.attr("id")+'"]').attr("data-min")),x=rt(x,s,l)*(m.val()-T),j=rt(j,s,l)*(m.val()-T));break;case"row":x=rt(x,s,l)*((m.val().match(new RegExp("\n","g"))||[]).length+1),j=rt(j,s,l)*((m.val().match(new RegExp("\n","g"))||[]).length+1)}p.data("tm-quantity")&&(x*=parseFloat(p.data("tm-quantity")),j*=parseFloat(p.data("tm-quantity"))),q=h(x,s,!1,!1,m),F=h(j,s,!1,!1,m),m.data("price",u(x,s,m)),m.data("original_price",u(j,s,m)),v(m.closest(".tmcp-field-wrap").find(".tc-price"),x,q,j,F)}else{var A=p.closest(".tmcp-ul-wrap");if(D=A.data("rules"),S=A.data("original-rules"),"object"==typeof D){switch(x=n in D?D[n]:D[0],j="object"==typeof S?n in S?S[n]:S[0]:x,"object"==typeof I?k=n in I?I[n]:"object"==typeof(y=A.data("rulestype"))&&n in y?y[n]:I[0]:"object"==typeof(I=A.data("rulestype"))&&(k=n in I?I[n]:I[0]),"object"==typeof k&&(k=k[0]),p.is("select")?p.find("option").each(function(){var e=t(this);e.removeData("tm-price-for-late"),e.removeData("islate"),e.removeClass("tm-epo-late-field")}):(m.removeData("tm-price-for-late"),m.removeData("islate"),m.removeClass("tm-epo-late-field")),k){case"":x=rt(x,s,l),j=rt(j,s,l);break;case"fee":x=x,j=j;break;case"percent":x=x/100*z,j=j/100*z;break;case"percentcurrenttotal":Xt.push({setter:m,price:x,bundleid:d}),m.data("tm-price-for-late",x).data("islate",1).addClass("tm-epo-late-field"),x=0,j=0;break;case"char":x=rt(x,s,l)*m.val().length,j=rt(j,s,l)*m.val().length;break;case"charpercent":x=x/100*z*m.val().length,j=j/100*z*m.val().length;break;case"step":f?(x=rt(x,s,l)*m.val(),j=rt(j,s,l)*m.val()):(x=rt(x,s,l)*m.val().tmtoFloat(),j=rt(j,s,l)*m.val().tmtoFloat());break;case"stepfee":f?(x*=m.val(),j*=m.val()):(x*=m.val().tmtoFloat(),j*=m.val().tmtoFloat());break;case"currentstep":f?(x=rt(m.val(),s,l),j=rt(m.val(),s,l)):(x=rt(m.val().tmtoFloat(),s,l),j=rt(m.val().tmtoFloat(),s,l));break;case"currentstepfee":f?(x=m.val(),j=m.val()):(x=m.val().tmtoFloat(),j=m.val().tmtoFloat());break;case"intervalstep":f&&(T=parseFloat(t('.tm-range-picker[data-field-id="'+m.attr("id")+'"]').attr("data-min")),x=rt(x,s,l)*(m.val()-T),j=rt(j,s,l)*(m.val()-T))}p.data("tm-quantity")&&(x*=parseFloat(p.data("tm-quantity")),j*=parseFloat(p.data("tm-quantity"))),q=h(x,s,!1,!1,m),F=h(j,s,!1,!1,m),m.data("price",u(x,s,m)),m.data("original_price",u(j,s,m)),v(m.closest(".tmcp-field-wrap").find(".tc-price"),x,q,j,F)}}}function dt(e){Xt=[];var i;(i=e||o.find(".cart")).length<=0||i.each(function(e,i){var r='input[name^="variation_id"]';(i=t(i)).find("input.variation_id").length>0&&(r="input.variation_id");var n=!0,c=t(this).closest(Lt),d=i.find(r).val(),s=!1,l=i.attr("data-product_id");if(l||(l=i.closest(".component_content").attr("data-product_id"))||(l=0),c.length>0){s=!0;var p=at(et(c));p&&(n=a(p))}d||(d=0);var m,_;s?(m=o.find(".tm-extra-product-options.tm-cart-"+l),_=o.find(".tm-epo-totals.tm-cart-"+l)):(m=Ut,_=Wt);var f=_.data("fields-price-rules");if(m.data("tm_rules_init_done")||(_.data("force-quantity")&&i.find(P).val(_.data("force-quantity")),m.find(".tm-quantity .tm-qty").each(function(){var e=t(this);e.closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",e.val())}),m.find(".tmcp-attributes, .tmcp-elements").each(function(e,a){var i=(a=t(a)).data("rules"),o=a.data("original-rules");if("object"!=typeof i&&(i={0:"0"}),"object"!=typeof o&&(o={0:"0"}),"object"==typeof i){var r=rt(i[d.tmtoFloat()],_,f),c=h(r,_),s=rt(o[d.tmtoFloat()],_,f),l=h(s,_);a.find(".tmcp-field").each(function(e,a){var i=t(a);n?(i.data("price",u(r,_,i)),i.data("original_price",u(s,_,i)),v(i.closest(".tmcp-field-wrap").find(".tc-price"),r,c,s,l)):(i.data("price",0),i.data("original_price",0),i.closest(".tmcp-field-wrap").find(".amount").empty())})}}),m.data("tm_rules_init_done",1)),!n)return!0;var g={bto:c,cart:i,current_variation:d,is_bto:s,bundleid:l,totals:_,apply_dpd:f};m.find(".tmcp-field,.tmcp-sub-fee-field,.tmcp-fee-field").each(function(t,e){ct(e,g)})})}function st(e){return t(e).find(".single_variation .price,.bundle_price .price,.bto_item_wrap .price,.component_wrap .price,.composite_wrap .price").not(".tc-price")}function lt(a,i){function r(e,a){p.data("current_variation",a);var i,o=t(this),r=p.data("variations"),n=p.data("variations-subscription-sign-up-fee"),c=p.data("variations-subscription-period");r&&a&&a.variation_id&&(n[a.variation_id]?p.data("subscription-sign-up-fee",n[a.variation_id]):p.data("subscription-sign-up-fee","")),r&&a&&a.variation_id&&(c[a.variation_id]?p.data("subscription-period",c[a.variation_id]):p.data("subscription-period","")),r&&a&&a.variation_id&&void 0!==r[a.variation_id]?(i=r[a.variation_id],p.data("price",i),p.removeData("tcprice")):a&&"display_price"in a?(i=a.display_price,p.data("price",i),p.removeData("tcprice")):a&&t(a.price_html).find(".amount:last").length&&(i=(i=(i=(i=t(a.price_html).find(".amount:last").text()).replace(tm_epo_js.currency_format_thousand_sep,"")).replace(tm_epo_js.currency_format_decimal_sep,".")).replace(/[^0-9.]/g,""),i=parseFloat(i),p.data("price",i),p.removeData("tcprice")),l.find(".cpf-product-price").val(i),o.data("tm_variations_did_init",!0),o.data("tm-styled-variations")||m.trigger({type:"tm-epo-update"})}var n,s,l,p,m,g="main";a?(n=et(a),(g=ot(a))||(g=a.attr("data-item_id")),s=o.find(".tm-extra-product-options.tm-cart-"+g),l=o.find(".tm-totals-form-"+g),p=o.find(".tm-epo-totals.tm-cart-"+g)):(Tt&&0!==Tt.length||(Tt=Ut.is(".tc-shortcode")?o:w(o,"form",c)),a=Tt.parent(),s=Ut,l=Zt,p=Wt),m=i||Tt,p.data("tm_for_cart",m);var b='input[name^="variation_id"]';m.find("input.variation_id").length>0&&(b="input.variation_id"),p.data("variation_id_selector",m.find(b).not(".wceb_picker_wrap "+b)),p.data("qty_element",m.find(P).last());var y=p.data("type"),k=a.find(".variations_form");k.data("tc_product_id",c),s.off("focus.cpf",".tm-quantity .tm-qty").on("focus.cpf",".tm-quantity .tm-qty",function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(e.val()),o=parseFloat(e.attr("max")),r=parseFloat(e.attr("min")),n=e.attr("step"),c=C(a,!1),d=D(a,!1),s=!0;i&&""!==i&&"NaN"!==i||(i=0),""!==o&&"NaN"!==o||(o=""),""!==r&&"NaN"!==r||(r=0),"any"!==n&&""!==n&&void 0!==n&&"NaN"!==parseFloat(n)||(n=1),(i<r||i>o)&&(s=!1),c&&d&&s?e.data("tm-prev-value",i):e.data("tm-prev-value",r)}).off("change.cpf",".tm-quantity .tm-qty").on("change.cpf",".tm-quantity .tm-qty",function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(e.val()),o=parseFloat(e.attr("max")),r=parseFloat(e.attr("min")),n=e.attr("step"),c=C(a,!1),d=D(a,!1),s=!0;i&&""!==i&&"NaN"!==i||(i=0),""!==o&&"NaN"!==o||(o=""),""!==r&&"NaN"!==r||(r=0),"any"!==n&&""!==n&&void 0!==n&&"NaN"!==parseFloat(n)||(n=1),(i<r||i>o)&&(s=!1),c&&d&&s?a.data("tm-quantity",e.val()).trigger("change.cpf"):e.data("tm-prev-value")?e.val(e.data("tm-prev-value")):e.val(r)}).off("tmaddquantity",".tm-quantity .tm-qty").on("tmaddquantity",".tm-quantity .tm-qty",function(){var e=t(this);e.closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",e.val())}),s.find(".tm-epo-reset-variation").off("click.cpfv").on("click.cpfv",function(e){var a=t(this),i=a.attr("data-tm-for-variation").tmjid(),r=a.closest(".cpf-type-variations");a.closest(".cpf_hide_element").find(".tm-epo-variation-element").removeAttr("checked").prop("checked",!1),k.find("#"+i).val("").change(),k.find("#"+i).trigger("focusin"),o.find(".cpf-type-variations").not(r).each(function(e,a){k.find("#"+t(a).find(".tm-epo-variation-element").first().attr("data-tm-for-variation").tmjid()).trigger("focusin")}),t(this).blur(),k.trigger("woocommerce_update_variation_values_tmlogic")}),s.find("input.tm-epo-variation-element,input.tm-epo-variation-element + label").off("mouseup.cpfv").on("mouseup.cpfv",function(e){var a=t(this);a.is("label")&&(a=a.prev("input")),a.attr("disabled")&&k.find(".reset_variations").trigger("click");var i=a.attr("data-tm-for-variation").tmjid();k.find("#"+i).trigger("focusin")}),s.find(".tm-epo-variation-element").off("change.cpfv tm_epo_variation_element_change").on("change.cpfv tm_epo_variation_element_change",function(e){var a=t(this),i=a.attr("data-tm-for-variation").tmjid(),r=a.val(),n=a.closest(".cpf-type-variations"),c=k.find("#"+i);if(e&&e.type&&"tm_epo_variation_element_change"==e.type);else{var d=!1;c.each(function(){if(this.value==r)return d=!0,!1}),d||c.trigger("focusin"),c.val(r).change()}r||c.trigger("focusin"),o.find(".cpf-type-variations").not(n).each(function(e,a){k.find("#"+t(a).find(".tm-epo-variation-element").first().attr("data-tm-for-variation").tmjid()).trigger("focusin")}),t(this).blur(),k.trigger("woocommerce_update_variation_values_tmlogic")}).off("focusin.cpfv").on("focusin.cpfv",function(){if(t(this).is("select")){var e=t(this).attr("data-tm-for-variation").tmjid();k.find("#"+e).trigger("focusin"),k.trigger("woocommerce_update_variation_values_tmlogic")}}),s.find("select.tm-epo-field").off("tm-select-change-html").on("tm-select-change-html",function(){if(!i||!Tt||void 0===Tt.data("per_product_pricing")||Tt.data("per_product_pricing")){var e=t(this),a=h(e.find("option:selected").data("price"),p,!1,!1,e),o=h(e.find("option:selected").data("original_price"),p,!1,!1,e);v(e.closest(".tmcp-field-wrap").find(".tc-price"),e.find("option:selected").data("price"),a,e.find("option:selected").data("original_price"),o);var r=e.closest(".tmcp-field-wrap").find(".tc-tooltip");r.length>0&&r.attr("data-tm-tooltip-html",e.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed");var n=e.closest(".tmcp-field-wrap").find(".tc-inline-description");n.length>0&&(e.find("option:selected").attr("data-tm-tooltip-html")?n.html(e.find("option:selected").attr("data-tm-tooltip-html")):n.html("")),""===e.val()?r.addClass("tm-hidden"):r.removeClass("tm-hidden")}}).off("tm-select-change").on("tm-select-change",function(){i&&Tt&&void 0!==Tt.data("per_product_pricing")&&!Tt.data("per_product_pricing")||(t(this).trigger("tm-select-change-html"),m.trigger({type:"tm-epo-update",norules:1,element:t(this)}))}),s.find("select.tm-epo-field").trigger("tm-select-change-html"),s.find("input.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").each(function(){var e=t(this),a=t.fn.tm_template(B.tc_chars_remanining,{maxlength:e.attr("maxlength"),characters_remaining:tm_epo_js.i18n_characters_remaining});e.after(t(a))}),s.find("input.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").off("change.tc_maxlen keyup.tc_maxlen").on("change.tc_maxlen keyup.tc_maxlen",function(e){var a=t(this);a.closest(".tmcp-field-wrap").find(".tc-chars-remanining").html(parseInt(a.attr("maxlength"))-parseInt(a.val().length))}),s.find(".tm-epo-field").off("tm_trigger_product_image").on("tm_trigger_product_image",function(e){var a=t(this),i=t(this);if(i.is(".tm-product-image:checkbox, .tm-product-image:radio, select.tm-product-image")){var r=i.closest(".tmcp-field-wrap").find("label img"),n=i.closest(".cpf-section").is(".tm-epo-variation-section");if(i.is("select.tm-product-image")&&(a=i.children("option:selected")),t(r).length>0||n&&void 0!==a.attr("data-image")||void 0!==a.attr("data-image")&&""!==a.attr("data-image")||void 0!==a.attr("data-imagep")&&""!==a.attr("data-imagep"))if(i.is(":checked")||i.is("select.tm-product-image")&&""!==i.val()&&(""!==i.find("option:selected").attr("data-rules")||i.is(".tm-epo-variation-element"))){var c=t(r).first().attr("data-original");c||n||(c=t(r).first().attr("src")),c||(c=a.attr("data-image")),a.attr("data-imagep")&&(c=a.attr("data-imagep")),c?o.trigger("tm_change_product_image",{src:c,element:i,element_current:a,main_product:o,epo_holder:s}):o.trigger("tm_change_product_image",{src:!1,element:i,element_current:a,main_product:o,epo_holder:s})}else o.trigger("tm_restore_product_image",{element:i,element_current:a,main_product:o,epo_holder:s});else o.trigger("tm_restore_product_image",{element:i,element_current:a,main_product:o,epo_holder:s})}else o.trigger("tm_attempt_product_image",{element:i,element_current:a,main_product:o,epo_holder:s})}),s.find(".tm-quantity").off("showhide.cpfcustom").on("showhide.cpfcustom",function(e){var a=t(this),i=a.closest(".tmcp-field-wrap").find(".tm-epo-field"),o=!1;i.is(".tm-epo-variation-element")||(i.is("select")?""!==i.val()&&(o=!0):i.is(":checkbox")?i.is(":checked")&&(o=!0):i.is(":radio")?i.is(":checked")&&(o=!0,"yes"==tm_epo_js.tm_epo_show_only_active_quantities&&i.closest(".cpf_hide_element").find(".tm-epo-field.tmcp-radio").each(function(){t(this).closest(".tmcp-field-wrap").find(".tm-quantity").hide()})):i.val()&&(o=!0),o?("yes"==tm_epo_js.tm_epo_show_only_active_quantities&&a.show(),a.find(".tm-qty").removeClass("ignore").prop("disabled",!1)):("yes"==tm_epo_js.tm_epo_show_only_active_quantities&&a.hide(),a.find(".tm-qty").addClass("ignore").prop("disabled",!0)),setTimeout(function(){a.closest(".tcowl-carousel").trigger("refresh.owl.carousel")},200))}),s.find(".tm-quantity").trigger("showhide.cpfcustom"),s.find(".tm-epo-field").off("change.cpfcustom").on("change.cpfcustom",function(e){t(this).closest(".tmcp-field-wrap").find(".tm-quantity").trigger("showhide.cpfcustom")}),s.find(".tm-epo-field").filter(":checkbox:checked, :radio:checked").not(".tm-epo-variation-element").each(function(){t(this).closest(".tmcp-field-wrap").addClass("tc-active")}),s.find(".tm-epo-field").off("change.cpf").on("change.cpf",function(e){var a=t(this),i=a.closest(".tmcp-field-wrap"),r=a.closest(".tmcp-ul-wrap");if(!a.is(".tm-epo-variation-element")){if(a.is(":checkbox, :radio")&&(a.is(":radio")&&r.find(".tmcp-field-wrap").removeClass("tc-active"),a.is(":checked")?i.addClass("tc-active"):i.removeClass("tc-active")),a.is(".use_images:checkbox, .use_images:radio")&&a.attr("data-imagec")){var n=i.find(".radio_image,.checkbox_image").first();n.length>0&&(a.is(":checked")?n.prop("src",a.attr("data-imagec")):n.prop("src",a.attr("data-image")))}a.is(".use_images:radio")&&a.closest(".cpf-type-radio").find(".use_images:radio").not(a).each(function(){var e=t(this);e.closest(".tmcp-field-wrap").find(".radio_image").first().prop("src",e.attr("data-image"))}),a.is(".tmcp-range")&&a.trigger("change.cpflogic"),a.is("select")?a.trigger("tm-select-change"):(a.is(".tmcp-radio")&&a.closest(".cpf-type-radio").find(".tm-quantity .tm-qty").each(function(){t(this).closest("li.tmcp-field-wrap").find(".tmcp-radio").is(":checked")?t(this).removeAttr("disabled"):t(this).attr("disabled","disabled")}),m.trigger({type:"tm-epo-update",norules:1,element:a}))}a.trigger("tm_trigger_product_image"),o.trigger("tm_attempt_product_image",{element:a,main_product:o,epo_holder:s})}),s.find(".tm-epo-reset-radio").off("click.cpf").on("click.cpf",function(){var e=t(this).closest(".cpf_hide_element").find(".tm-epo-field.tmcp-radio:checked");e.length&&(e.removeAttr("checked").prop("checked",!1),e.trigger("change.cpf"),e.trigger("change.cpflogic"))}),s.find(".tm-epo-field.tmcp-textarea,.tm-epo-field.tmcp-textfield").off("keyup.cpf").on("keyup.cpf",function(){t(this).trigger("change.cpf")}),s.find(".tm-epo-field.tmcp-upload").off("change.cpfv").on("change.cpfv",function(){var e=t(this),a=e.closest("label"),i=e.closest(".tmcp-field-wrap"),o=i.find(".cpf-upload-container"),r=i.find(".tm-filename"),n=e.val().replace("C:\\fakepath\\","");o.length&&r.length<=0&&(r=t('<span class="tm-filename"></span>'),a.after(r)),r.html(n);var c=s.data("num_uploads");c||(c=[]),c[e.closest(".cpf_hide_element").attr("data-uniqid")]=n,s.data("num_uploads",c)}),a.find(P).last().off("change.cpf").on("change.cpf",function(){m.trigger("tm-epo-check-dpd"),t(this).data("tm-prev-value",t(this).val()),m.trigger({type:"tm-epo-update",norules:2})}).data("tm-prev-value",a.find(P).last().val()),m.on("woocommerce-product-addons-update",function(e){var a=t(this).find("#bkap_price_charged").val();l.find(".cpf-product-price").val(a),p.data("price",a),m.trigger({type:"tm-epo-update"})}),a.find(".total_price").off("wc-measurement-price-calculator-total-price-change.cpf").on("wc-measurement-price-calculator-total-price-change.cpf",function(t,e,a){var i="1"!==p.attr("data-prices-include-tax")&&"incl"===p.attr("data-tax-display-mode"),o="1"===p.attr("data-prices-include-tax")&&"incl"!==p.attr("data-tax-display-mode");i&&!o?a=f(a,p,null,i):!i&&o&&(a=_(a,p,null,o)),l.find(".cpf-product-price").val(a),p.data("price",a),m.trigger({type:"tm-epo-update"})}),a.find(".product_price").off("wc-measurement-price-calculator-product-price-change.cpf dwc-measurement-price-calculator-update.cpf").on("wc-measurement-price-calculator-product-price-change.cpf dwc-measurement-price-calculator-update.cpf",function(t,e,a){var i="1"!==p.attr("data-prices-include-tax")&&"incl"===p.attr("data-tax-display-mode"),o="1"===p.attr("data-prices-include-tax")&&"incl"!==p.attr("data-tax-display-mode");a=i&&!o?f(a,p,null,i):!i&&o?_(a,p,null,o):parseFloat(a),l.find(".cpf-product-price").val(a),p.data("price",a),m.trigger({type:"tm-epo-update"})}),t(".product_price, .total_price").length>0&&t("form.cart").trigger("wc-measurement-price-calculator-update"),m.off("woocommerce-nyp-update.cpf").on("woocommerce-nyp-update.cpf",function(){var t=m.find(".nyp"),e=t.data("price");t.length>0&&(l.find(".cpf-product-price").val(e),p.data("price",e),m.trigger({type:"tm-epo-update"}))}),H.off("woocommerce-nyp-updated.cpf").on("woocommerce-nyp-updated.cpf",function(){m.trigger("woocommerce-nyp-update.cpf")}),m.trigger("woocommerce-nyp-update.cpf"),t("#fancy-product-designer-"+p.parent().attr("data-product-id")).off("priceChange.cpf").on("priceChange.cpf",function(t,e,a){var i=a;p.data("fpdprice"),p.data("fpdprice",parseFloat(i)),void 0===p.data("tcprice")?p.data("tcprice",parseFloat(p.data("price"))):p.data("price",parseFloat(p.data("tcprice"))),i=parseFloat(p.data("price"))+parseFloat(i),p.parent().find(".cpf-product-price").val(i),p.data("price",i),m.trigger({type:"tm-epo-update"})}),m.off("tm-epo-check-dpd").on("tm-epo-check-dpd",function(e){var a=p;if(1==a.data("fields-price-rules")){var i=a.data("product-price-rules"),o=a.data("tm_for_cart");if(i&&o){var r='input[name^="variation_id"]';o.find("input.variation_id").length>0&&(r="input.variation_id");var n=o.find(P).last(),c=parseFloat(n.val()),d=parseFloat(n.data("tm-prev-value")),s=o.find(r).val();s||(s=0),isNaN(c)&&(a.attr("data-is-sold-individually")||0===n.length)&&(c=1),(i[s]&&0!==s.tmtoFloat()||i[0])&&(i[s]||(s=0),t(i[s.tmtoFloat()]).each(function(t,e){var a=parseFloat(e.min),i=parseFloat(e.max);(isNaN(i)&&a<=c||!isNaN(i)&&a<=c&&c<=i)&&(a<=d&&d<=i||dt(o))}))}}}),m.off("tm-epo-update").on("tm-epo-update",function(a){a.stopImmediatePropagation();var r,c=t(this),d=p.attr("data-tm-epo-final-total-box"),l=c.attr("data-product_id"),_=c.find("input.variation_id").length>0?"input.variation_id":'input[name^="variation_id"]',f=0,g=0,v=!1,b=0,y=p.data("type"),w=!1,k=c.find(P).last(),x=parseFloat(k.val()),j=m.find(".cpf-bto-price"),q=!0,F=c.find(_).val(),C=p.attr("data-price-override"),D=[];if(l||(l=c.closest(".component_content").attr("data-product_id"))||(l=0),F||(F=0),i&&p.addClass("cpf-bto-totals"),a.norules?(1==a.norules&&ct(a.element),Xt=[],s.find(".tm-epo-late-field").each(function(){var e=t(this),a=e.data("tm-price-for-late");e.data("price",0),Xt.push({setter:e,price:a,bundleid:l})})):dt(c),isNaN(x)&&(p.attr("data-is-sold-individually")||0===k.length)&&(x=1),p.length?f=nt(p):j.length>0&&(f=j.val()),g=f,i&&c.find(".cpf-bto-price").length>0?(!0,f=parseFloat(c.find(".cpf-bto-price").val()),q=c.find(".cpf-bto-price").data("per_product_pricing")):!i&&o.find(".cpf-bto-price").length>0&&(r=1,v=[],o.find(".cpf-bto-price").each(function(e,a){if(!isNaN(parseFloat(t(this).val()))){var i=t(this).closest(".cart").find(P);i=i.length>0?parseFloat(i.val()):1;var o=t(this).parent().find(".cpf-bto-totals").attr("data-is-sold-individually"),r=t(this).parent().find(".cpf-bto-optionsprice").val();r=isNaN(parseFloat(r))?0:parseFloat(r),f=parseFloat(f)+parseFloat(t(this).val()*i),v.push([t(this).val(),r,i,o])}}),o.find(".cpf-bto-optionsprice").each(function(e,a){isNaN(parseFloat(t(this).val()))||(f=parseFloat(f)+parseFloat(t(this).val()))})),!1!==f){(i||Dt&&"woocommerce_before_add_to_cart_button"==tm_epo_js.tm_epo_totals_box_placement)&&("variable"!=y&&"variable-subscription"!=y||p.data("moved_inside")||(c.find(".variations_button").before(p),p.data("moved_inside",1))),Dt&&"woocommerce_before_add_to_cart_button"==tm_epo_js.tm_epo_totals_box_placement&&("bto"!=y&&"composite"!=y||p.data("moved_inside")||(c.find(".bundle_price,.composite_price").after(p),p.data("moved_inside",1))),s.find(".tmcp-field").each(function(a,i){var o=t(this),r=o.closest(".cpf_hide_element"),n=o.closest(".tmcp-field-wrap"),c=r.attr("data-fblabelshow"),d=r.attr("data-fbvalueshow"),s=""===c?r.find(".tm-epo-field-label").html():"",l="",p=n.find(".tm-qty").val();if(void 0===p&&(p=""),o.is(":checkbox, :radio, :input")&&e(o,!0)){var m=0;if(o.is(".tmcp-checkbox, .tmcp-radio"))if(o.is(":checked")){m=o.data("price"),w=!0,o.data("isset",1);var _=o.closest("li.tmcp-field-wrap"),f=_.find(".checkbox_image,.radio_image");l="";var u=o.closest("li.tmcp-field-wrap").find(".tm-label");u.length&&(l=u.html()),f.length&&(l+=f.clone().addClass("tc-img-floating")[0].outerHTML),o.is(".use_images")&&(l=_.find(".tc-label").first().html(),f.length&&(l+=f.clone().addClass("tc-img-floating")[0].outerHTML)),D.push({title:s,value:l,price:m,quantity:p,label_show:c,value_show:d})}else o.data("isset",0);else if(o.is(".tmcp-select")){m=o.find("option:selected").data("price");var g=o.children("option:selected");""===g.val()&&""===g.attr("data-rulestype")||(w=!0),o.find("option").data("isset",0),o.find("option:selected").data("isset",1),""===o.find("option:selected").val()&&""===o.find("option:selected").attr("data-rulestype")||(l=o.find("option:selected").text(),D.push({title:s,value:l,price:m,quantity:p,label_show:c,value_show:d}))}else if(o.val())if(o.is(".tmcp-range")&&"0"==o.val())o.data("isset",0);else{if(m=o.data("price"),w=!0,o.data("isset",1),l=o.val(),o.is(".tmcp-range")){var h=t(".tm-range-picker[data-field-id='"+o.attr("id")+"']").attr("data-step").split(".");h=1==h.length?0:h[1].length,l=accounting.formatNumber(l,{decimal:N,thousand:T,precision:h})}D.push({title:s,value:l,price:m,quantity:p,label_show:c,value_show:d})}else o.data("isset",0);m||(m=0),b=parseFloat(b)+parseFloat(m)}}),p.data("tm-floating-box-data",D);var I=0,S=0;s.find(".tmcp-sub-fee-field,.tmcp-fee-field").each(function(){var a=t(this);if(a.is(":checkbox, :radio, :input")&&e(a,!0)){var i=0;if(a.is(".tmcp-checkbox, .tmcp-radio"))a.is(":checked")?(i=a.data("price"),w=!0,a.data("isset",1)):a.data("isset",0);else if(a.is(".tmcp-select")){i=a.find("option:selected").data("price");var o=a.children("option:selected");""===o.val()&&""===o.attr("data-rulestype")||(w=!0),a.find("option").data("isset",0),a.find("option:selected").data("isset",1)}else a.val()?(i=a.data("price"),w=!0,a.data("isset",1)):a.data("isset",0);i||(i=0),a.is(".tmcp-sub-fee-field")&&(I=parseFloat(I)+parseFloat(i)),a.is(".tmcp-fee-field")&&(S=parseFloat(S)+parseFloat(i))}}),Mt=w,z(),S>0&&(w=!0),"bto"!=p.attr("data-type")&&"composite"!=p.attr("data-type")||"show"===Wt.data("btois")&&(w=!0),r&&(w=!0),i&&!q&&(w=!1),"pxq"!=d&&"hide"!=d&&"normal"!=d&&"final"!=d&&"hideoptionsifzero"!=d||(w=!0),x>1&&(w=!0),"variable"!=y&&"variable-subscription"!=y||F.tmtoFloat()||(w=!1);var O=b;f=u(f,p);var A=Nt(parseFloat(f)+parseFloat(O),l,p);"disable"==d&&(w=!1),"disable_change"!=d&&"yes"!=tm_epo_js.tm_epo_change_variation_price&&"yes"!=tm_epo_js.tm_epo_change_original_price||(w=!0);var L,M,E,R={},H=0,U=parseFloat(f*x);if(b=parseFloat(b*x),tm_epo_js.extra_fee&&(H=parseFloat(tm_epo_js.extra_fee),isNaN(H)&&(H=0)),v){f=u(g,p),U=U=parseFloat(f*x);for(var $=0;$<v.length;$++){var Q=v[$],Y=0;Q[3]?(Y=u(parseFloat(Q[0])+parseFloat(Q[1]),p),f+=Y,U+=parseFloat(Y)):(Y=+u(parseFloat(Q[0])*parseFloat(Q[2])+parseFloat(Q[1]),p),f+=Y,U+=parseFloat(Y*x))}}if(O+=A,b=parseFloat(O*x),"1"==C&&parseFloat(b)>0&&(f=g=0,U=parseFloat(f*x)),void 0!==p.data("tc_is_bookings")){var J=p.data("bookings_form"),K=0,V=!1;J.length&&("1"==tm_epo_js.wc_booking_person_qty_multiplier&&J.find('[id^="wc_bookings_field_persons"]').each(function(){K+=parseFloat(t(this).val()),V=!0}),"1"==tm_epo_js.wc_booking_block_qty_multiplier&&J.find("#wc_bookings_field_duration").length&&(K+=parseFloat(J.find("#wc_bookings_field_duration").val()),V=!0)),V&&(b*=K)}b=parseFloat(t.tc_apply_filters("tc_adjust_total",b,p)),S=parseFloat(t.tc_apply_filters("tc_adjust_totals_fee",S,p));var et=b+S;L=h(b,p,!0,!0),M=h(S,p,!0,!0);var at=U;U=parseFloat(U+et+H),E=h(U=t.tc_apply_filters("tc_adjust_product_total_price",U,et,H,b,S,p),p,!0,!0);var it=h(parseFloat(f+O),p,!0,!0);"yes"===tm_epo_js.tm_epo_fees_on_unit_price&&(it=h(parseFloat(f+parseFloat(O)+parseFloat(parseFloat(S)/x)),p,!0,!0));var ot,rt=!1,lt=!1,pt="",mt=!1,_t=!1,ft="",ut=!1;if("pxq"==d||"final"==d||"hide"==d||0===et&&"hideoptionsifzero"==d||(0===b&&"hideoptionsifzero"==d||(rt=!0),0!==S&&(lt=!0)),H&&(mt=!0,pt=h(H,p,!0,!0)),E&&(_t=!0),p.data("is-subscription")){var gt=parseFloat(p.data("subscription-sign-up-fee"))+parseFloat(I);gt&&(ut=!0,ft=h(gt,p,!0,!0))}if((!0===a.product_false||void 0!==p.data("bookings_form_init")&&0===p.data("bookings_form_init"))&&(E="-"),R={options_price_per_unit:O,qty:x,product_total_price:U,product_total_price_without_options:at,cart_fee_options_total_price:S,options_total_price:b,total_plus_fee:et,unit_price:tm_epo_js.i18n_unit_price,formatted_unit_price:it,show_unit_price:"yes"===tm_epo_js.tm_epo_show_unit_price,options_total:tm_epo_js.i18n_options_total,fees_total:tm_epo_js.i18n_fees_total,formatted_options_total:L,formatted_fees_total:M,show_options_total:rt,show_fees_total:lt,extra_fee:tm_epo_js.i18n_extra_fee,formatted_extra_fee:pt,show_extra_fee:mt,final_total:tm_epo_js.i18n_final_total,formatted_final_total:E,show_final_total:_t,sign_up_fee:tm_epo_js.i18n_sign_up_fee,formatted_subscription_fee_total:ft,show_sign_up_fee:ut},R=t.tc_apply_filters("tc_adjust_tc_totals_ob",R,{epo_object:Gt,tm_set_price:h,product_total_price:U,product_price:f,qty:x}),ot=t.fn.tm_template(B.tc_final_totals,R),p.data("tm-html",ot),p.data("tc_totals_ob",R),w&&x>0){if("disable_change"!=d&&"yes"!=tm_epo_js.tm_epo_change_variation_price||(!0===t.tc_apply_filters("hide_native_price",!0)&&"disable"!=d&&"disable_change"!=d?st(c).hide():st(c).show()),"disable"==d||"disable_change"==d||"hideifoptionsiszero"==d&&0===et||"hide"==d?(ot="",p.html(ot).hide(),Zt.hide()):(p.html(ot).show(),Zt.show(),X.trigger("tc-totals-container",{epo:R,totals_holder:p,data:{epo_object:Gt,tm_set_price:h,product_total_price:U,product_price:f,qty:x},tm_epo_js:tm_epo_js})),E&&U>=0){var ht=st(c),vt=accounting.formatMoney(U,{symbol:"",decimal:N,thousand:T,precision:tm_epo_js.currency_format_num_decimals,format:""});"disable_change"!=d&&"yes"!=tm_epo_js.tm_epo_change_variation_price||ht.html(t.fn.tm_template(B.tc_formatted_price,{price:vt})).show(),"disable_change"!=d&&"yes"!=tm_epo_js.tm_epo_change_original_price||(l&&i&&c.find(".cpf-bto-price").length>0&&et>0?t("#component_"+l).find(W).html(t.fn.tm_template(B.tc_formatted_price,{price:vt})).show():!i&&o.find(".cpf-bto-price").length>0&&et>0?c.find(Z).html(t.fn.tm_template(B.tc_formatted_price,{price:vt})).show():U>0?t(G).html(t.fn.tm_template(B.tc_formatted_price,{price:vt})).show():y&&"composite"!==y&&t(G).html(tm_epo_js.current_free_text))}i?(q&&c.find(".cpf-bto-optionsprice").val(parseFloat(b)),Tt.trigger({type:"tm-epo-update",norules:1})):(Wt.data("is_active",!0),tt())}else st(c).show().each(function(){t(this).data("tm-original-html")?t(this).html(t(this).data("tm-original-html")):t(this).data("tm-original-html",t(this).html())}),0===g&&"yes"==tm_epo_js.tm_epo_remove_free_price_label&&st(c).hide(),p.empty().hide(),i&&(q&&c.find(".cpf-bto-optionsprice").val(parseFloat(b*x)),Tt.trigger({type:"tm-epo-update",norules:1})),tt();n&&o.find(".bto_form_"+n+",#composite_form_"+n+",#composite_data_"+n).trigger("cpf_bto_review"),Tt.trigger("tm-epo-after-update"),X.trigger("tc-epo-after-update",{epo:R,totals_holder:p,data:{epo_object:Gt,tm_set_price:h,product_total_price:U,product_price:f,qty:x},tm_epo_js:tm_epo_js})}else p.empty()}),a.find(".variations_form").off("found_variation.tmepo tm_fix_stock",".single_variation_wrap").on("found_variation.tmepo tm_fix_stock",".single_variation_wrap",function(e,i){j(t(this),a)}),"variable"!=y&&"variable-subscription"!=y||(a.find(".variations_form").off("found_variation.tmepo").on("found_variation.tmepo",function(e,i){r(0,i),j(t(this),a),t(this).trigger("wc-measurement-price-calculator-update")}).off("hide_variation.tmepo").on("hide_variation.tmepo",function(t,e){m.trigger({type:"tm-epo-update",norules:2})}).trigger("check_variations"),X.on("tm-do-epo-update",function(){m.trigger({type:"tm-epo-update"})})),a.find(".variations select").off("blur.cpf").on("blur.cpf",function(){o.find(".variations_form").data("tm_variations_did_init",!0)}),Ct(a,g,o,s),pt(),X.trigger("tm-epo-init-events",{epo:{epo_id:d,form:x(),current_cart:m,cart_container:a,epo_holder:s,totals_holder_container:l,totals_holder:p,main_cart:Tt,main_epo_inside_form:Dt,product_id_selector:Rt,epo_id_selector:Ht,product_id:c,this_epo_container:Ut,this_totals_container:Zt,this_epo_totals_container:Wt}}),X.trigger("epo_options_before_visible"),"yes"===tm_epo_js.tm_epo_progressive_display?setTimeout(function(){s.css("opacity",0).addClass("tc-show").animate({opacity:1},A,"easeOutExpo",function(){X.trigger("epo_options_visible"),X.trigger("tmlazy")})},O):(s.addClass("tc-show"),X.trigger("epo_options_visible"),X.trigger("tmlazy"))}function pt(){var e=[".tm-variation-ul-color",".tm-variation-ul-image","ul.use_images_container","ul.use_colors_container"];t.each(e,function(e,a){o.find(a).each(function(e,a){t(a).each(function(e,a){var i=(a=t(a)).find(".tmhexcolorimage-li-nowh");if(i.length){var o,r=a.closest(".cpf-section"),n=i.first();r.length&&r.find(".tm-collapse-wrap.closed").length?(r.find(".tm-collapse-wrap").removeClass("closed").show().css({position:"absolute",visibility:"hidden"}),n.find("label").css("width","100%"),n.find(".tmhexcolorimage").css("width","100%"),n.height(),o=n.width(),r.find(".tm-collapse-wrap").addClass("closed").hide().css({position:"",visibility:""})):(n.height(),o=n.width());i.find(".tmhexcolorimage").css({"min-width":o+"px","min-height":o+"px"})}})})})}function mt(){if(!o.data("tm-composite-setup")){var e=Wt;o.data("tm-composite-setup",1),t(Lt).find(".cart").append('<input type="hidden" class="tm-post-support addon">'),o.find(".tm-post-support.addon").on("change",function(e){t(this).closest(Lt).trigger("wc-composite-item-updated.cpf")}),t(Lt).off("found_variation.cpf").on("found_variation.cpf",function(i,r){var n,c=t(this),d=et(c),s=at(d),l=ot(c);s&&(o.find(".bto_form,#composite_form_"+d+",#composite_data_"+d).find(it(l)).removeData("cpf_review_price"),o.find(".bto_form,#composite_form_"+d+",#composite_data_"+d).find(it(l)).find(".amount").empty(),!0===a(s)&&(n=parseFloat(r.price)),c.find(".cpf-bto-price").data("per_product_pricing",a(s)),c.find(".cpf-bto-price").val(n),Tt.data("per_product_pricing",a(s)),c.find(".cart").trigger({type:"tm-epo-update",norules:1}),setTimeout(function(){Tt.trigger({type:"tm-epo-update",norules:1})},100),e.data("btois","none"))}).off("wc-composite-component-loaded.cpf").on("wc-composite-component-loaded.cpf",function(){t(this).trigger("wc-composite-item-updated.cpf")}).off("wc-composite-item-updated.cpf").on("wc-composite-item-updated.cpf",function(){ft(),o.find(".tm-collapse").tmtoggle();var e=t(this),r=e.find(".tm-extra-product-options");l(e),s(e),ut(e),gt(),p(r),m(r),i(r);var n,c=et(e),d=at(c),_=ot(e);o.find(".bto_form,#composite_form_"+c+",#composite_data_"+c).find(it(_)).removeData("cpf_review_price"),o.find(".bto_form,#composite_form_"+c+",#composite_data_"+c).find(it(_)).find(".amount").empty(),d&&(!0===a(d)&&(n=parseFloat(e.find(".bto_item_data,.component_data").data("price"))),e.find(".cpf-bto-price").data("per_product_pricing",a(d)),e.find(".cpf-bto-price").val(n),Tt.data("per_product_pricing",a(d)),lt(e,e.find(".cart")),e.find(".cart").trigger({type:"tm-epo-update",composite_item:e}),Tt.trigger({type:"tm-epo-update",norules:1}),j(e.find(".cart"),e))}).off("change.cpfbto",".bto_item_options select,.component_options_select").on("change.cpfbto",".bto_item_options select,.component_options_select",function(a){var i=t(this),r=et(i),n=ot(i);o.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(it(n)).removeData("cpf_review_price"),o.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(it(n)).find(".amount").empty(),""===i.val()?(e.data("passed",!1),e.data("btois","none")):Tt.trigger({type:"tm-epo-update",norules:1})}).off("woocommerce_variation_select_change.cpf").on("woocommerce_variation_select_change.cpf",function(a){var i=t(this),r=et(i),n=ot(i);o.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(it(n)).removeData("cpf_review_price"),o.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(it(n)).find(".amount").empty(),""===i.find(".variations .attribute-options select").val()&&(e.data("passed",!1),e.data("btois","none"))}),o.find(".bundle_wrap").off("show_bundle.cpf,wc-composite-show-add-to-cart.cpf").on("show_bundle.cpf,wc-composite-show-add-to-cart.cpf",function(){_t(t(this).closest(".cart").attr("data-container-id"))}),o.find(".composite_data .composite_wrap").off("wc-composite-show-add-to-cart.cpf").on("wc-composite-show-add-to-cart.cpf",function(){var e=t(this).closest(".composite_form").find(".composite_data").data("container_id");_t(e),o.find("#composite_data_"+e).trigger("cpf_bto_review")}),o.find(".bto_form,.composite_form").off("woocommerce-product-addons-update.cpf cpf_bto_review").on("woocommerce-product-addons-update.cpf cpf_bto_review",function(){var e=t(this);e.parent().find(Lt).each(function(){var a,i=t(this),o=ot(i),r=e.find(it(o)),n=t(".widget_composite_summary_elements").find(".summary_element.summary_element_"+o),c=i.find(".cpf-bto-optionsprice").val(),d=e.find(".tc-epo-totals.tm-cart-"+o);r.length&&(r.data("cpf_review_price")?a=accounting.unformat(r.data("cpf_review_price"),N):r.find(".amount").length&&(a=accounting.unformat(r.find(".amount").html(),tm_epo_js.currency_format_decimal_sep),r.data("cpf_review_price",a)),c&&d.data("tc_totals_ob")&&(r.find(".amount").html(d.data("tc_totals_ob").formatted_final_total),n.find(".amount").html(d.data("tc_totals_ob").formatted_final_total)))})}),t(Lt).trigger("wc-composite-component-loaded.cpf")}}function _t(e){var a=!0,i=Wt;o.find(".bto_form_"+e+",#composite_form_"+e+",#composite_data_"+e).parent().find(Lt).each(function(){var i=t(this),r=ot(i),n=o.find(".bto_form_"+e+" .bundle_wrap .bundle_button .form_data_"+r+",#composite_form_"+e+" .bundle_wrap .bundle_button .form_data_"+r+",#composite_data_"+e+" .composite_wrap .composite_button .form_data_"+r),c=n.find("input.product_input").val(),d=n.find("input.quantity_input").val(),s=n.find("input.variation_input").val(),l=i.find(".bto_item_data,.component_data").data("product_type");void 0===l||""===l||""===c?a=!1:"none"!=l&&""===d?a=!1:"variable"==l&&void 0===s&&(a=!1)}),a?i.data("btois","show"):i.data("btois","none"),Tt.trigger({type:"tm-epo-update",norules:1})}function ft(){"yes"!=tm_epo_js.tm_epo_no_lazy_load&&(S?t(S).find("img.tmlazy").lazyLoadXT():t(".tc-extra-product-options img.tmlazy").lazyLoadXT())}function ut(e){e||(e=Ut),e.find(".tm-owl-slider-section").each(function(){var e=t(this),a=e.css("display");e.find(".tm-slide").first().before('<div class="tm-owl-slider"></div>'),e.find(".tm-slide").appendTo(e.find(".tm-owl-slider")),a=(e=e.find(".tm-owl-slider")).css("display"),e.show().addClass("tcowl-carousel").tmowlCarousel({dots:!1,nav:!0,items:1,autoHeight:!0,mouseDrag:!1,touchDrag:!0,navText:[tm_epo_js.i18n_prev_text,tm_epo_js.i18n_next_text],navClass:["owl-prev button","owl-next button"],navElement:"a",loop:!1,navRewind:!1}),e.css("display",a)})}function gt(e){e||(e=Ut.find(".tm-color-picker")),t(e).length&&(t(e).spectrum({showButtons:!0,clickoutFiresChange:!1,chooseText:tm_epo_js.closeText,cancelText:tm_epo_js.i18n_cancel}),t(e).spectrum("enable"))}function ht(e){var a=e.closest(".tmcp-field-wrap").find("label img"),i=t(a).first().attr("data-original");return e.is("select.tm-product-image")&&(e=e.children("option:selected")),i||(i=t(a).first().attr("src")),i||(i=e.attr("data-image")),e.attr("data-imagep")&&(i=e.attr("data-imagep")),!!i}function vt(e,a){var i=!1,o=t(".images"),r=t(".yith_magnifier_zoom"),n=o.find(".yith_magnifier_zoom").first().attr("href"),c=o.find(".yith_magnifier_zoom img").first().attr("src");window.yith_magnifier_options&&o.data("yith_magnifier")&&(i=!0);var d=!1,s=t(".iosSlider.product-gallery-slider,.iosSlider.product-slider");s.length&&s.iosSlider&&(d=!0);var l=!1,p=a.find(".images .fusion-flexslider");p.length&&p.flexslider&&(l=!0);var m=e.data("elevateZoom")||!1,_=a.find("div.product-images .woocommerce-main-image"),f=!1,u=a.find(".images .easyzoom");u.length&&u.filter(".images .easyzoom.first").data("easyZoom")&&(u=u.filter(".images .easyzoom.first").data("easyZoom"),f=!0);var g=!1,h=a.find(".images .easyzoom");f||(h=a.find(".images .has-image-zoom .slide")).length&&h.filter(".images .has-image-zoom .slide.first").data("easyZoom")&&(h=h.filter(".images .has-image-zoom .slide.first").data("easyZoom"),g=!0),X.on("load",function(){setTimeout(function(){u.length&&u.data("easyZoom")&&(u=u.data("easyZoom"),f=!0),h.length&&h.data("easyZoom")&&(h=h.data("easyZoom"),g=!0)},150)});var v=!1,b=a.find(".woocommerce-product-gallery"),y=!1;if(b.length&&b.data("flexslider")&&(v=!0,t.isFunction(t.fn.zoom)&&window.wc_single_product_params&&window.wc_single_product_params.zoom_enabled)){var w=e.closest(".woocommerce-product-gallery__image");w.length>0&&e.width()>t(".woocommerce-product-gallery").width()&&(y=w,e.data.wc27_zoom_target=y)}var k=t.isFunction(t.fn.zoom)&&wc_single_product_params.zoom_enabled,x=!1;return!v&&k&&(x=a.find(".woocommerce-product-gallery__image")),{is_yith_wcmg:{type:"yith",enabled:i,element:o,yith_wcmg_zoom:r,_yith_wcmg_default_zoom:n,yith_wcmg_default_image:c},is_iosSlider:{type:"iosslider",enabled:d,element:s},is_flexslider:{type:"flexslider",enabled:l,element:p},is_elevateZoom:{type:"elevatezoom",enabled:m,element:_},is_easyzoom:{type:"easyzoom",enabled:f,element:u},is_easyzoom_flatsome:{type:"easyzoom-flatsome",enabled:g,element:h},is_wc27_gallery:{type:"woocommerce",enabled:v,element:b},is_zoom_enabled:{type:"zoom",enabled:!v&&k,element:x}}}function bt(e,a,i,o,r,n,c){for(var d in e)if(e.hasOwnProperty(d)&&(d=e[d]).enabled)switch(d.type){case"yith":if(a){a.attr("srcset",i).attr("src-orig",i),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy");var s={elements:{zoom:t(".yith_magnifier_zoom"),zoomImage:a,gallery:t(".yith_magnifier_gallery li a")}};d.element.yith_magnifier(t.extend(!0,{},window.yith_magnifier_options,s))}else o?d.yith_wcmg_zoom.attr("href",d.yith_wcmg_default_zoom):d.yith_wcmg_zoom.attr("href",d._yith_wcmg_default_zoom),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy"),d.element.yith_magnifier(window.yith_magnifier_options);break;case"iosslider":setTimeout(function(){d.element.iosSlider("update")},150);break;case"flexslider":X.trigger("resize");break;case"elevatezoom":d.element.each(function(){var e=t(this).data("elevateZoom");void 0!==e&&e.swaptheimage(i,i)});break;case"easyzoom":d.element.swap(null,i);break;case"easyzoom-flatsome":d.element.swap(i,i);break;case"woocommerce":d.element.flexslider(0);var l=d.element;window.setTimeout(function(){l.trigger("woocommerce_gallery_init_zoom"),X.trigger("resize")},10);break;case"zoom":var p=c.find(".woocommerce-product-gallery--with-images").width(),m=!1;if(t(d.element).each(function(e,a){if(t(a).find("img.wp-post-image").attr("data-large_image_width")>p)return m=!0,!1}),m){var _={touch:!1};"ontouchstart"in window&&(_.on="click"),d.element.trigger("zoom.destroy"),d.element.zoom(_)}else d.element.trigger("zoom.destroy")}X.trigger("tm_gallery_compatibility_actions",{event_data:r,product_element:c,form:n})}function yt(){var t=o.closest("#product-"+c);return t.length<=0&&(t=o.closest(".post-"+c)),t}function wt(e){var a;return""!==tm_epo_js.tm_epo_global_product_image_selector?a=t(tm_epo_js.tm_epo_global_product_image_selector):0===(a=e.find(".woocommerce-product-gallery__image:not(.clone), .woocommerce-product-gallery__image--placeholder:not(.clone)").eq(0).find(".wp-post-image").first()).length&&(a=e.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img").first()),t(a).length>1&&(a=t(a).first()),a}function kt(t,e,a,i){var o=a.find(".flex-control-nav li:eq(0) img"),r=a.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n=e,c=e.closest("a");t&&t.image_link&&t.image_link&&t.image_link.length>1?(null===t.full_src&&(t.full_src=t.image_link),null===t.full_src_w&&(t.full_src_w=n.attr("data-large_image_width")),null===t.full_src_h&&(t.full_src_h=n.attr("data-large_image_height")),n.length&&(t.image_srcset||(t.image_sizes=!1),t.image_sizes||(t.image_srcset=!1),n.tc_set_attr("src",t.image_link,0),n.tc_set_attr("srcset",t.image_srcset,0),n.tc_set_attr("sizes",t.image_sizes,0),n.tc_set_attr("title",t.image_title,0),n.tc_set_attr("alt",t.image_alt,0),n.tc_set_attr("data-src",t.full_src,0),n.tc_set_attr("data-large_image",t.full_src,0),n.tc_set_attr("data-large_image_width",t.full_src_w,0),n.tc_set_attr("data-large_image_height",t.full_src_h,0),r.tc_set_attr("data-thumb",t.image_link,1)),o.length&&o.tc_set_attr("src",t.image_link,2),c.length&&(c.tc_set_attr("href",t.full_src,3),c.tc_set_attr("title",t.image_caption,3))):(n.length&&(n.tc_reset_attr("src",0),n.tc_reset_attr("srcset",0),n.tc_reset_attr("sizes",0),n.tc_reset_attr("title",0),n.tc_reset_attr("alt",0),n.tc_reset_attr("data-src",0),n.tc_reset_attr("data-large_image",0),n.tc_reset_attr("data-large_image_width",0),n.tc_reset_attr("data-large_image_height",0),r.tc_reset_attr("data-thumb",1)),o.length&&o.tc_reset_attr("src",2),c.length&&(c.tc_reset_attr("href",3),c.tc_reset_attr("title",3)))}function xt(e,a,i){var o=a.find(".flex-control-nav li:eq(0) img"),r=a.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n=e,c=e.closest("a");t.isEmptyObject(t.tc_product_image)?t.tc_product_image_store=t.tc_populate_store(e,a,i):t.tc_product_image_store=t.tc_maybe_copy_object_values(t.tc_product_image_store,t.tc_product_image),n.tc_update_attr("src",0),n.tc_update_attr("srcset",0),n.tc_update_attr("sizes",0),n.tc_update_attr("title",0),n.tc_update_attr("alt",0),n.tc_update_attr("data-src",0),n.tc_update_attr("data-large_image",0),n.tc_update_attr("data-large_image_width",0),n.tc_update_attr("data-large_image_height",0),r.tc_update_attr("data-thumb",1),o.tc_update_attr("src",2),c.tc_update_attr("href",3),c.tc_update_attr("title",3)}function jt(e,a,i){var o=a.find(".flex-control-nav li:eq(0) img"),r=a.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n=e,c=e.closest("a");n.attr("data-o_src",t.tc_product_image_store[0].src),n.attr("data-o_srcset",t.tc_product_image_store[0].srcset),n.attr("data-o_sizes",t.tc_product_image_store[0].sizes),n.attr("data-o_title",t.tc_product_image_store[0].title),n.attr("data-o_alt",t.tc_product_image_store[0].alt),n.attr("data-o_data-src",t.tc_product_image_store[0]["data-src"]),n.attr("data-o_data-large_image",t.tc_product_image_store[0]["data-large_image"]),n.attr("data-o_data-large_image_width",t.tc_product_image_store[0]["data-large_image_width"]),n.attr("data-o_data-large_image_height",t.tc_product_image_store[0]["data-large_image_height"]),r.attr("data-o_data-thumb",t.tc_product_image_store[1]["data-thumb"]),t.tc_product_image_store[2]&&o.attr("data-o_src",t.tc_product_image_store[2].src),c.attr("data-o_href",t.tc_product_image_store[3].href),c.attr("data-o_title",t.tc_product_image_store[3].title)}function qt(){setTimeout(function(){"inline"==window.tm_epo_js.tm_epo_global_product_image_mode?zt():Ft()},window.tc_epo_product_image_setup_delay||0)}function Ft(){var a,i,r=Gt.form,n=o.closest("#product-"+c),d=[];a=wt(n),i=vt(a,n),t(a).length>0&&(r.on("reset_image.tcpi",function(i){t.tc_product_image=t.tc_replace_object_values(t.tc_product_image,t.tc_product_image_store);var c=[];t(Ut.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&""!==a.val()&&c.push(a)}),c.length?c[c.length-1].trigger("tm_trigger_product_image"):t.tc_product_image_store=t.tc_populate_store(a,n,r)}),r.on("found_variation.tcpi",function(i,c){xt(a,n,r);var d=[];t(Ut.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&""!==a.val()&&d.push(a)}),d.length&&(jt(a,n,r),d[d.length-1].trigger("tm_trigger_product_image"))}),t.tc_product_image_store=t.tc_maybe_copy_object_values_from_img(t.tc_product_image_store,a,n,r),o.off("tm_change_product_image").on("tm_change_product_image",function(c,s){var l=s.element,p=s.element_current;if(l&&p){var m=""!==l.data("imagep")?"imagep":"image",_=s.element_current.data("image-variations");if(_&&(_=_[m]),d=[],t(Ut.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);a.is("option")&&(a=a.closest("select")),e(a)&&""!==a.val()&&d.push(a)}),d.length&&!d[d.length-1].is(l))return;kt(_,a,n,r),bt(i,a,_.image_link,!1,s,r,n)}}),o.off("tm_restore_product_image").on("tm_restore_product_image",function(c,d){var s=d.element,l=[];s&&(t(Ut.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&""!==a.val()&&l.push(a)}),l.length&&!l[l.length-1].is(s))?l[l.length-1].trigger("tm_trigger_product_image"):(kt(!1,a,n,r),bt(i,!1,a.attr("src"),!1,d,r,n))}),o.off("tm_attempt_product_image").on("tm_attempt_product_image",function(t,e){}),d=[],t(Ut.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&""!==a.val()&&d.push(a)}),d.length&&d[d.length-1].trigger("tm_trigger_product_image")),X.trigger("tm_product_image_loaded")}function zt(){var a,i,r=Gt.form,d=yt();if(a=wt(d),i=vt(a,d),t(a).length>0){a.data("tm-current-image",!1);var s=a.closest("a"),l=a.attr("src"),p=a.width(),m=a.height();o.off("tm_change_product_image").on("tm_change_product_image",function(o,d){var s,l=d.element.closest(".cpf-section"),_=(l.is(".tm-epo-variation-section")?l:d.epo_holder).find(".tm-product-image:checked,select.tm-product-image"),f=[],u=d.element.attr("id"),g=!0,h=d.main_product,v=h.closest("#product-"+c),b=p,y=m,w=t("<div class='blockUI blockOverlay tm-preloader-img'></div>");v.length<=0&&(v=h.closest(".post-"+c)),0===(s=v.find("#"+u+"_tmimage")).length&&(s=a);var k=function(){w.remove(),r.tc_image_update(!1),a.data("tm-current-image",!1),v.find(".tm-clone-product-image").hide(),a.show()};if(d.src!=s.attr("src")||!s.is(":visible"))if(!1!==d.src){w.css({width:b,height:y}),_.each(function(){var a=t(this);e(a)&&ht(a)&&n({element:a.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&f.push(a)}),f.length&&(_=f[f.length-1]).attr("id"),_.attr("id")!=d.element.attr("id")&&(g=!1);var x=a.tm_clone(),j=new Image;x.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),g&&a.before(w),i.is_yith_wcmg.yith_wcmg_default_zoom=i.is_yith_wcmg.element.find(".yith_magnifier_zoom").first().attr("href"),i.is_yith_wcmg.yith_wcmg_default_image=i.is_yith_wcmg.element.find(".yith_magnifier_zoom img").first().attr("src"),j.onerror=function(){k()},j.onload=function(){if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();v.find("#"+u+"_tmimage").remove(),v.find(".tm-clone-product-image").hide(),x.prop("src",j.src).hide(),a.hide().after(x),x.css("opacity",0).show(),bt(i,x,j.src),w.animate({opacity:0},750,"easeOutExpo",function(){w.remove()}),x.animate({opacity:1},window.tc_epo_image_animation_delay||1500,"easeOutExpo",function(){}),X.trigger("tm_change_product_image_loaded",{src:d.src,element:d.element,main_product:d.main_product,epo_holder:d.epo_holder})},x.attr("id",u+"_tmimage").addClass("tm-clone-product-image").hide(),x.attr("src-orig")&&x.attr("src-orig",d.src),g?(j.src=d.src,r.tc_image_update(d.element,x),a.data("tm-current-image",u),X.trigger("tm_change_product_image_show",{src:d.src,element:d.element,main_product:d.main_product,epo_holder:d.epo_holder})):(x.prop("src",d.src).hide(),a.after(x)),X.trigger("tm_change_product_image_end",{src:d.src,element:d.element,main_product:d.main_product,epo_holder:d.epo_holder})}else k()}),o.off("tm_restore_product_image").on("tm_restore_product_image",function(t,e){X.trigger("tm_restore_product_image_pre",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder});var o,n,d,p,m,_=e.element.attr("id"),f=e.main_product,u=f.closest("#product-"+c),g=e.element.closest(".cpf-section"),h=g.is(".tm-epo-variation-section")?g:e.epo_holder,v=!1;if(u.length<=0&&(u=f.closest(".post-"+c)),d=u.find("#"+_+"_tmimage").is(":visible"),u.find("#"+_+"_tmimage").remove(),0===u.find(".tm-clone-product-image").length)a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1);else{if(!d)return void X.trigger("tm_restore_product_image_loaded_exit",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder});p=u.find(".tm-clone-product-image").length,_=a.data("tm-current-image");for(var b=p-1;b>=0;b--){if(n=u.find(".tm-clone-product-image").eq(b),o=n.attr("id").replace("_tmimage",""),(m=h.find('[id="'+o+'"]')).is(":checked")&&m.closest(".cpf_hide_element").is(":visible")){u.find(".tm-clone-product-image").eq(b).show(),s.attr("href",u.find(".tm-clone-product-image").eq(b).prop("src")),a.data("tm-current-image",o),v=!0;break}u.find(".tm-clone-product-image").eq(b).hide()}v?u.find("#"+_+"_tmimage").remove():(a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1))}bt(i,!1,v?n.attr("src"):l,u.find(".tm-clone-product-image").filter(":visible").length),X.trigger("tm_restore_product_image_loaded",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})}),o.off("tm_attempt_product_image").on("tm_attempt_product_image",function(o,d){var p,m,_,f,u=d.main_product,g=u.closest("#product-"+c),h=d.element?d.element.closest(".cpf-section"):t(u.find(".tm-epo-variation-section"),d.epo_holder),v=h.is(".tm-epo-variation-section")?h:d.epo_holder,b=v.find(".tm-product-image:checked,select.tm-product-image"),y=[],w="",k=!1,x=a.data("tm-current-image");if(g.length<=0&&(g=u.closest(".post-"+c)),v=u.find(".tm-epo-variation-section").add(d.epo_holder),(b=v.find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&ht(a)&&n({element:a.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&y.push(a)}),y.length&&(w=(b=y[y.length-1]).attr("id")),!y.length||!b.length||x&&w==x){var j=v.find('[id="'+x+'"]').closest(".cpf_hide_element");if(x&&(!1===j.data("isactive")||!1===j.closest(".cpf-section").data("isactive"))){if(g.find("#"+x+"_tmimage").remove(),0===(_=g.find(".tm-clone-product-image").length))a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1);else{for(var q=_-1;q>=0;q--){if(p=g.find(".tm-clone-product-image").eq(q),m=p.attr("id").replace("_tmimage",""),(f=v.find('[id="'+m+'"]')).is(":checked")&&f.closest(".cpf_hide_element").is(":visible")){g.find(".tm-clone-product-image").eq(q).show(),s.attr("href",g.find(".tm-clone-product-image").eq(q).prop("src")),a.data("tm-current-image",m),k=!0;break}g.find(".tm-clone-product-image").eq(q).hide()}k||(a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1))}bt(i,!1,k?p.attr("src"):l,g.find(".tm-clone-product-image").filter(":visible").length)}}else b.last().trigger("tm_trigger_product_image")});var _=[];t(Ut.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&""!==a.val()&&_.push(a)}),_.length&&_[_.length-1].trigger("tm_trigger_product_image")}X.trigger("tm_product_image_loaded")}function Ct(t,e,a,i){var o='input[name^="variation_id"]';if(t.find("input.variation_id").length>0&&(o="input.variation_id"),i.find(".tm-epo-variation-element").length||i.data("tm-epo-variation-element")){i.data("tm-epo-variation-element",i.find(".tm-epo-variation-element"));var r,n=i.find(".tm-epo-variation-section");if(e&&"main"!=e){r=n.closest("li.tm-extra-product-options-field"),t.find(".variations").hide().after(n.addClass("tm-extra-product-options nopadding")),r.is(":empty")&&r.hide();var c=!1;t.off("wc_variation_form.tmlogic").on("wc_variation_form.tmlogic",function(){c=!0,t.find(".variations_form").on("click.tmlogic",".reset_variations",function(e){t.find(".tm-epo-variation-element").closest("li").show(),t.find("select.tm-epo-variation-element").val("").children("option").removeAttr("disabled").show(),t.find(".tm-epo-variation-element").removeAttr("disabled").removeClass("tm-disabled").removeAttr("checked").prop("checked",!1),X.trigger("tmlazy"),a.find(".tm-epo-variation-element").trigger("tm_trigger_product_image")}),t.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(e,a){k(t)});for(var e=0;e<I.length;e++){var i=I[e];if("object"==typeof i){var r="string"==typeof i.name||!1,n="string"==typeof i.selector||!1,d="function"==typeof i.func||!1;r&&d&&('input[name="variation_id"]'==n&&(n=o),i.selector?t.data("tm-styled-variations",1).off(i.name,i.selector).on(i.name,i.selector,i.func):t.data("tm-styled-variations",1).off(i.name).on(i.name,i.func))}}I=[],t.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")}),$.ready(function(){0==c&&t.trigger("wc_variation_form.tmlogic")})}else{(t=t.find(".variations_form")).find(".variations").hide(),r=n.closest("li.tm-extra-product-options-field"),t.find(".variations").hide().after(n.addClass("tm-extra-product-options nopadding")),r.is(":empty")&&r.hide(),t.off("click.tmlogic",".reset_variations").on("click.tmlogic",".reset_variations",function(e){t.find(".tm-epo-variation-element").closest("li").show(),t.find("select.tm-epo-variation-element").val("").children("option").removeAttr("disabled").show(),t.find(".tm-epo-variation-element").removeAttr("disabled").removeClass("tm-disabled").removeAttr("checked").prop("checked",!1),X.trigger("tmlazy"),a.find(".tm-epo-variation-element").trigger("tm_trigger_product_image")}),t.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(e,a){k(t)});for(var d=0;d<I.length;d++){var s=I[d];if("object"==typeof s){var l="string"==typeof s.name||!1,p="string"==typeof s.selector||!1,m="function"==typeof s.func||!1;l&&m&&('input[name="variation_id"]'==p&&(p=o),s.selector?t.data("tm-styled-variations",1).off(s.name,s.selector).on(s.name,s.selector,s.func):t.data("tm-styled-variations",1).off(s.name).on(s.name,s.func))}}I=[],t.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")}St[St.length]={trigger:function(){return!0},on_true:function(){return a.find(".tm-epo-variation-element").attr("disabled","disabled"),!0},on_false:function(){a.find(".tm-epo-variation-element").removeAttr("disabled")}}}}function Nt(a,i,o){var r=0;return t.each(Xt,function(n,c){var d,s,l=c.price,p=c.original_price,m=c.setter,_=c.bundleid,f=m;m.is("option")&&(f=m.closest("select")),d=f.attr("name").tmjid();var b=t(".tc-totals-form.tm-totals-form-"+o.attr("data-cart-id")).attr("data-product-id"),y=t(".tc-totals-form.tm-totals-form-"+o.attr("data-cart-id")).attr("data-epo-id");s=t(".tc-extra-product-options.tm-product-id-"+b+"[data-epo-id='"+y+"']").find("#"+d+"_hidden");var w,k;_==i?(l=l/100*a,p=p/100*a,f.data("tm-quantity")&&(l*=parseFloat(f.data("tm-quantity")),p*=parseFloat(f.data("tm-quantity"))),1==m.data("isset")&&e(m)&&(r+=l),w=h(l,o,!0,!1,m),k=h(p,o,!0,!1,m),m.data("price",u(l,o,m)),m.data("pricew",u(l,o,m)),m.data("original_price",u(p,o,m)),m.data("original_pricew",u(p,o,m)),v(m.closest(".tmcp-field-wrap").find(".tc-price"),l,w,p,k),0===s.length&&f.before('<input type="hidden" id="'+d+'_hidden" name="'+d+'_hidden" value="'+g(l,o,m)+'" />'),m.is(".tm-epo-field.tmcp-radio")?m.is(":checked")&&s.val(g(l,o,m)):s.val(g(l,o,m))):void 0!==m.data("pricew")&&(w=h(m.data("pricew"),o,!0,!1,m),k="",void 0!==m.data("original_pricew")&&(k=h(m.data("original_pricew"),o,!0,!1,m)),v(m.closest(".tmcp-field-wrap").find(".tc-price"),m.data("pricew"),w,m.data("original_pricew"),k))}),Xt=[],r}o=t(o),t.fn.apply_submit_events=y,X.trigger("tm-epo-init-start");var Tt=!1,Dt=!1,It=!1,St=[],Ot=!1,At=void 0!==c,Lt=".bto_item,.component",Mt=!1,Et=!1;if(At||o.is(".product")&&(Et=!0,At=H.find(L).length),At||"no"!=tm_epo_js.tm_epo_enable_final_total_box_all||o.is(".tm-no-options-composite")){if(Et&&(X.trigger("tm-epo-init-no-options"),!o.is(".product")||o.is(".tm-no-options-pxq")||o.is(".tm-no-options-composite")||(o=H)),!c){var Pt=o.find(M).last();Pt.length>0?c=Pt.val():(Pt=t(".tc-totals-form.tm-totals-form-main"),c=Pt.attr("data-product-id")),c||(c="")}d||(d=parseInt(o.find("input.tm-epo-counter").last().val()),isNaN(d)&&(d=""));var Rt=".tm-product-id-"+c,Ht='[data-epo-id="'+d+'"]',Ut=t(".tc-extra-product-options"+Rt+Ht),Zt=t(".tc-totals-form"+Rt+Ht),Wt=t(".tc-epo-totals"+Rt+Ht);console.log(Zt),function(){Tt||(Tt=w(o,"form",c));var e=x(),a=e.find(L).length,i=e.find(".tc-totals-form").length;a>0&&(Dt=!0),i>0&&(It=!0),It||(St[St.length]={trigger:function(){return!0},on_true:function(){var a=t(".tc-totals-form.tm-product-id-"+c+'[data-epo-id="'+d+'"]').tm_clone(),i=t('<div class="tm-hidden tm-formepo-normal"></div>');return e.find(".tm-formepo-normal").remove(),i.append(a),e.append(i),!0},on_false:function(){setTimeout(function(){t(".tm-formepo").remove()},100)}}),Dt||(St[St.length]={trigger:function(){return!0},on_true:function(){var a=t(L+".tm-product-id-"+c+'[data-epo-id="'+d+'"]').tm_clone(),i=t('<div class="tm-hidden tm-formepo"></div>');return e.find(".tm-formepo").remove(),i.append(a),e.append(i),!0},on_false:function(){setTimeout(function(){t(".tm-formepo").remove()},100)}})}(),Tt.data("product_id",c).data("epo_id",d).data("product_id_selector",Rt).data("epo_id_selector",Ht),function(){Ut.on("change.cpflimit","input.tm-epo-field.tmcp-checkbox",function(){var e=t(this);C(e,!0),D(e,!0)});var e=Ut.find(".tm-exactlimit");e.length&&Y(e);var a=Ut.find(".tm-minimumlimit");a.length&&K(a)}(),"yes"==tm_epo_js.tm_epo_upload_popup&&(St[St.length]={trigger:function(){return!0},on_true:function(){var e=Ut.data("num_uploads");return e&&t("body").tm_floatbox({fps:1,ismodal:!0,refresh:"fixed",width:"50%",height:"300px",classname:"flasho tm_wrapper",data:t.fn.tm_template(B.tc_upload_messages,{files:e,title:tm_epo_js.i18n_uploading_files,message:tm_epo_js.i18n_uploading_message})}),!0},on_false:function(){return!0}}),l(),s(),$.on("click.cpfurl change.cpfurl tmredirect",".use_url_container .tmcp-radio, .use_url_container .tmcp-radio+label",function(e){var a=t(this).attr("data-url");a&&window.location!=a&&(e.preventDefault(),window.location=a)}),$.on("change.cpfurl tmredirect",".use_url_container .tmcp-select",function(e){var a=t(this).children("option:selected").attr("data-url");a&&window.location!=a&&(e.preventDefault(),window.location=a)}),tt(),t.tm_tooltip(Ut.find(".tm-tooltip")),Ut.find(".tm-collapse").tmtoggle(),Ut.find(".tm-section-link").tmsectionpoplink();var Gt={main_product:o,main_cart:Tt,epo_id:d,form:x(),main_epo_inside_form:Dt,product_id_selector:Rt,epo_id_selector:Ht,product_id:c,this_epo_container:Ut,this_totals_container:Zt,this_epo_totals_container:Wt,qty_selector:P};t(Gt.form).data("epo_object",Gt);var Xt=[],$t=o.find(".variations_form");if($t.length>0){var Bt=function(){$t.on("wc_variation_form.cpf",function(){$t.data("tc_loaded")||(p(Ut),m(Ut),i(Ut),Xt=[],lt(),qt(),setTimeout(function(){Tt.trigger({type:"tm-epo-update"})},10),$t.data("tc_loaded",!0))}),U&&$t.trigger("wc_variation_form.cpf")},Qt=!1;if(t(".variation_form_section .variations-table").length&&(Qt=!0),Qt){var Yt=function(){var t=requestAnimationFrame(Yt);$t.data("bound")&&(cancelAnimationFrame(t),Bt(),$t.trigger("wc_variation_form.cpf"))};Yt()}else Bt()}else setTimeout(function(){p(Ut),m(Ut),i(Ut),Xt=[],lt(),qt(),mt(),Tt.trigger("tm-epo-check-dpd"),Tt.trigger({type:"tm-epo-update"})},20),t(".composite_data").on("wc-composite-initializing",function(e,a){a.actions.add_action("component_summary_content_updated",function(e){var a=o.find(".bto_form,.composite_form"),i=o.find("#composite_summary_"+a.data("product_id")).find(".summary_element.summary_element_"+e.step_id),r=t(".widget_composite_summary_elements").find(".summary_element.summary_element_"+e.step_id),n=a.find(".tc-epo-totals.tm-cart-"+e.step_id);n.data("tc_totals_ob")&&(i.find(".amount").html(n.data("tc_totals_ob").formatted_final_total),r.find(".amount").html(n.data("tc_totals_ob").formatted_final_total))},100,this)});ft(),ut(),gt(),function(){if(!r&&tm_epo_js.floating_totals_box&&"disable"!=tm_epo_js.floating_totals_box&&Tt&&Wt.length){var e,a=t('<div class="tm-floating-box '+tm_epo_js.floating_totals_box+'"></div>'),i=!1,o=t(".tm-floating-box-nks"),n=t(".tm-floating-box-alt"),c=!1;o.length>0?(i=!0,a.removeClass("top left right bottom").appendTo(o).show()):n.length>0?a.removeClass("top left right bottom").appendTo(n).hide():a.appendTo("body").hide(),(o.length>0||n.length>0)&&(c=!0);var d=function(){"always"!=tm_epo_js.floating_totals_box_visibility?t(window).scrollTop()>100||c?a.is(":hidden")&&!a.is(":empty")||c?i?a.show():a.fadeIn():!a.is(":hidden")&&a.is(":empty")&&(i?a.hide():a.fadeOut()):a.is(":hidden")||(i?a.hide():a.fadeOut()):a.show()},s=function(){var o=Wt.data("tm-html"),r=Wt.data("tm-floating-box-data"),n=[];if(r&&r.length&&t.each(r,function(e,a){""===a.title&&(a.title="&nbsp;"),""===a.value&&(a.value="&nbsp;"),a.title?(a.title=t("<div>"+a.title+"</div>"),a.title.find("span").remove(),a.title=a.title.html()):a.title="&nbsp;",i&&(""!==a.label_show&&(a.title=""),""!==a.value_show&&(a.value="")),n.push({label_show:a.label_show,value_show:a.value_show,title:a.title,value:a.value,quantity:a.quantity,price:h(a.price,Wt,!0,!1)})}),o&&""!==o||i?d():(o="",a.hide()),n&&!n.length&&n.push({label_show:"hidden",value_show:"hidden",title:"",value:"",quantity:0,price:0}),e=t.fn.tm_template(c?B.tc_floating_box_nks:B.tc_floating_box,{html_before:tm_epo_js.floating_totals_box_html_before,html_after:tm_epo_js.floating_totals_box_html_after,option_label:tm_epo_js.i18n_option_label,option_value:tm_epo_js.i18n_option_value,option_qty:tm_epo_js.i18n_option_qty,option_price:tm_epo_js.i18n_option_price,values:n,totals:o}),a.html(e),d(),"yes"==tm_epo_js.floating_totals_box_add_button){var s=Tt.find(R).first();s.tm_clone().addClass("tc-add-to-cart-button").on("click",function(){s.click()}).appendTo(a)}};s(),Tt.on("tm-epo-after-update",function(){s()}),i||(d(),"always"==tm_epo_js.floating_totals_box_visibility&&t(window).on("scroll",function(){d()}))}}(),function(){var t=x();X.trigger("tm-from-submit",{epo:{form:t,tm_apply_validation:b,form_submit_events:St,apply_submit_events:y,main_cart:Tt,main_epo_inside_form:Dt,product_id_selector:Rt,epo_id_selector:Ht,product_id:c,this_epo_container:Ut,this_totals_container:Zt,this_epo_totals_container:Wt}}),!b(t)&&St.length&&t.on("submit",y)}(),z(),function(){var e=Wt.attr("data-theme-name");if(e){e=e.toLowerCase();var a=Ut.find("select");switch(e){case"flatsome":case"flatsome-child":case"flatsome child":a.wrap('<div class="custom select-wrapper"/>');break;case"avada":case"avada-child":case"avada child":a.wrap('<div class="avada-select-parent tm-select-parent"></div>'),t('<div class="select-arrow">&#xe61f;</div>').appendTo(Ut.find(".tm-select-parent")),window.calc_select_arrow_dimensions?(calc_select_arrow_dimensions(),X.on("tmsectionpoplink cpflogicdone",function(){calc_select_arrow_dimensions()})):window.calcSelectArrowDimensions&&(calcSelectArrowDimensions(),X.on("tmsectionpoplink cpflogicdone",function(){calcSelectArrowDimensions()}));break;case"bazar":case"bazar-child":case"bazar child":a.wrap('<div class="tm-select-wrapper select-wrapper"/>');break;case"blaszok":case"blaszok-child":case"blaszok child":var i=function(){setTimeout(function(){t(".tm-extra-product-options select").not(".hasCustomSelect").filter(":visible").each(function(){t(this).is(".mpcthSelect")||(t(this).width(t(this).outerWidth()),t(this).customSelect({customClass:"mpcthSelect"}))})},100)};X.on("cpflogicrun",function(){i()}),X.on("epo_options_visible",function(){i()});break;case"handmade":case"handmade child theme":t(".tm-owl-slider.tcowl-carousel").addClass("manual")}X.trigger("tm-theme-specific-actions",{epo:{theme_name:e,all_epo_selects:a}})}$.off("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus").on("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus",function(){t(this).closest(".quantity").find(P).trigger("change.cpf")})}(),$.tcready(function(){F()}),X.trigger("tm-epo-compatibility",{epo:{form:x(),main_cart:Tt,main_epo_inside_form:Dt,product_id_selector:Rt,epo_id_selector:Ht,product_id:c,this_epo_container:Ut,this_totals_container:Zt,this_epo_totals_container:Wt}}),X.on("cpflogicdone",function(){pt()}),X.trigger("tm-epo-init-end",{epo:Gt})}else X.trigger("tm-epo-init-end-no-options")}function F(e){var a=t(e),i=a.attr("data-product-id"),o=a.attr("data-epo-id");q(a.parent(),!1,i,o)}function z(e){"no"==tm_epo_js.tm_epo_no_lazy_load&&t.extend(t.lazyLoadXT,{autoInit:!1,selector:"img.tmlazy",srcAttr:"data-original",visibleOnly:!1,updateEvent:t.lazyLoadXT.updateEvent+" tmlazy"});var a=t(".tm-no-options-pxq, .tm-no-options-composite");a.length>0&&a.each(function(e,a){q(t(a),!1)});try{var i=t(L).not(".tm-no-options-pxq, .tm-no-options-composite");i.length>0&&i.each(function(e,a){var i=t(this),o=i.attr("data-product-id"),r=i.attr("data-epo-id"),n=!1,c=t(M+'[value="'+o+'"]').closest("form,.cart").first().parent();c.length<=0&&(c=t(E+'[value="'+o+'"]').closest("form,.cart").first().parent()).length<=0&&((c=i.closest("form,.cart").first().parent(".tm-has-options")).length<=0&&i.is(".tc-shortcode")&&(c=i.wrap('<div class="tc-shortcode-wrap tc-wrap-'+r+'"></div>'),c=i.parent()),c.length>0&&(n=!0,i.closest("form,.cart").first().append(t('<input name="add-to-cart" value="'+o+'" type="hidden" />')),i.closest("form,.cart").first().append(t('<input type="hidden" value="" class="variation_id" name="variation_id">')))),c.length>0&&(c.is("form")&&(c=c.parent()),q(c,n,o,r))})}catch(t){}}String.prototype.tmunformat=function(){var t=accounting.unformat(this,C),e=parseFloat(t);return isNaN(e)?t:e};var C=""===tm_epo_js.tm_epo_global_input_decimal_separator?tm_epo_js.currency_format_decimal_sep:getSystemDecimalSeparator(),N=""===tm_epo_js.tm_epo_global_displayed_decimal_separator?tm_epo_js.currency_format_decimal_sep:getSystemDecimalSeparator(),T=""===tm_epo_js.tm_epo_global_displayed_decimal_separator?tm_epo_js.currency_format_thousand_sep:","==getSystemDecimalSeparator()?".":",",D=!1,I=[],S=!1,O=tm_epo_js.tm_epo_start_animation_delay||window.tc_epo_delay||500,A=tm_epo_js.tm_epo_animation_delay||window.tc_epo_animation_delay||500,L=".tc-extra-product-options",M='input[name="add-to-cart"]',E="input.tc-add-to-cart",P='input.qty,input[name="quantity"],select.qty,.drop-down-button #qty,.plus-minus-button #qty,.slider-input #amount',R=".add_to_cart_button, .single_add_to_cart_button",H=t("body"),U=!1,Z=".composite_data .composite_wrap .price .amount",W=".component_wrap .price",G=".woocommerce div.product p.price",X=t(window),$=t(document),B={price:wp.template("tc-price"),sale_price:wp.template("tc-sale-price"),tc_section_pop_link:wp.template("tc-section-pop-link"),tc_floating_box:wp.template("tc-floating-box"),tc_floating_box_nks:wp.template("tc-floating-box-nks"),tc_chars_remanining:wp.template("tc-chars-remanining"),tc_final_totals:wp.template("tc-final-totals"),tc_lightbox:wp.template("tc-lightbox"),tc_lightbox_zoom:wp.template("tc-lightbox-zoom"),tc_formatted_price:wp.template("tc-formatted-price"),tc_upload_messages:wp.template("tc-upload-messages")};B=t.tc_apply_filters("tc_adjust_template_engine",B),t.extend(t.tc_validator.messages,{required:tm_epo_js.tm_epo_global_validator_messages.required,email:tm_epo_js.tm_epo_global_validator_messages.email,url:tm_epo_js.tm_epo_global_validator_messages.url,number:tm_epo_js.tm_epo_global_validator_messages.number,digits:tm_epo_js.tm_epo_global_validator_messages.digits,maxlength:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.maxlength),minlength:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.minlength),max:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.max),min:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.min),step:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.step),lettersonly:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.lettersonly),lettersspaceonly:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.lettersspaceonly),alphanumeric:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.alphanumeric)}),t.tc_validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},t.tc_validator.messages.alphanumeric),t.tc_validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},t.tc_validator.messages.lettersonly),t.tc_validator.addMethod("lettersspaceonly",function(t,e){return this.optional(e)||/^[a-z," "]+$/i.test(t)},t.tc_validator.messages.lettersspaceonly),t.fn.tm_find_matching_variations=function(e,a){var i=[];if(e)for(var o=0;o<e.length;o++){var r=e[o];t.fn.tm_variations_match(r.attributes,a)&&i.push(r)}return i},t.fn.tm_variations_match=function(t,e){var a=!0;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],r=e[i];void 0!==o&&void 0!==r&&0!==o.length&&0!==r.length&&o!==r&&(a=!1)}return a},t().tclightbox||(t.fn.tclightbox=function(){var e=this;if(0!==e.length)return e.each(function(){var e=t(this);if(!e.is(".tcinit")){var a=e.attr("src")||e.attr("data-original"),i=e.closest("label"),o=i.closest(".tmcp-field-wrap").find(".tm-epo-field[id='"+i.attr("for")+"']");if(a=o.attr("data-imagel")||o.attr("data-imagep")||o.attr("data-image")||a){e.addClass("tcinit").before(t.fn.tm_template(B.tc_lightbox,{}));var r=e.prev();e.wrap('<div class="tc-lightbox-image-wrap"/>'),e.after(r);var n=r.find(".tc-lightbox-button"),c=new Image;c.src=a,c.onload=function(){n.addClass("tcinit").on("click.tclightbox",function(){if(!(t(".tc-closing.tc-lightbox").length>0)){var e=t.tm_getPageSize(),i=t("<img>").addClass("tc-lightbox-img").attr("src",a).css("maxHeight",e[3]+"px"),o=t("body").tm_floatbox({fps:1,ismodal:!1,refresh:"fixed",width:"auto",height:"auto",top:"0%",left:"0%",classname:"flasho tc-lightbox",animateIn:"tc-lightbox-zoomIn",animateOut:"tc-lightbox-zoomOut",data:t.fn.tm_template(B.tc_lightbox_zoom,{img:i[0].outerHTML}),zIndex:102001});t(".tc-lightbox-img, .tc-lightbox-button-close").on("click",function(){o.cancelfunc()})}})}}}})},$.ready(function(){t(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio_image").tclightbox()})),t().tmsectionpoplink||(t.fn.tmsectionpoplink=function(){var e=this;if(0!==e.length)return e.each(function(){var e=t(this),a=e.attr("data-sectionid"),i=e.attr("data-title")?e.attr("data-title"):tm_epo_js.i18n_addition_options,o=t('.cpf-section[data-uniqid="'+a+'"]'),r=!1,n=t('<div class="fl-overlay"></div>').css({zIndex:e.zIndex-1,opacity:.8}),c=function(){var e=t("#tm-section-pop-up");e.parents().removeClass("noanimated"),n.unbind().remove(),e.after(o),e.remove(),o.find(".tm-section-link").show(),o.find(".tm-section-pop").hide()};e.on("click.tmsectionpoplink",function(e){e.preventDefault(),r=!1,n.appendTo("body").click(c),o.before(t.fn.tm_template(B.tc_section_pop_link,{title:i,close:tm_epo_js.i18n_close}));var a=t("#tm-section-pop-up");a.find(".float_editbox").prepend(o),o.find(".tm-section-link").hide(),o.find(".tm-section-pop").show(),a.parents().addClass("noanimated"),a.find(".details_cancel").click(function(){r||(r=!0,c())}),X.trigger("tmlazy"),X.trigger("tmsectionpoplink")})})}),t().cpfdependson||(t.fn.cpfdependson=function(e,a,o,r){var n=this,c=0;if(0!==n.length&&"object"==typeof e)return a||(a="show"),o||(o="all"),t.each(e,function(a,o){if("object"!=typeof e)return!0;var n=s(o.element);n&&n.length>0&&(n.each(function(e,a){var o=t(a),n=o.closest("form"),c=".tm-product-id-"+o.closest(".tc-extra-product-options").attr("data-product-id"),d='[data-epo-id="'+o.closest(".tc-extra-product-options").attr("data-epo-id")+'"]',s=(n.data("product_id_selector"),n.data("epo_id_selector"),t(".tc-extra-product-options"+c+d)),l=t(".tc-extra-product-options"+c+d);if(a&&o.length>0&&(!o.data("tmhaslogicevents")||r)){if(o.is(".tm-epo-variation-element"))b("found_variation.tmlogic",!1,function(t,e){i(s),X.trigger("tm-do-epo-update")}),b("hide_variation.tmlogic",!1,function(t,e){i(s),X.trigger("tm-do-epo-update")});else{var p="change.cpflogic";(o.is(":text")||o.is("textarea"))&&(p="change.cpflogic keyup.cpflogic"),o.off(p).on(p,function(t){i(l)})}o.data("tmhaslogicevents",1)}}),c++)}),n.each(function(i,r){var n=t(this),d=!1;switch(n.data("matches",c).data("toggle",a).data("what",o).data("fields",e),a){case"show":d=!1;break;case"hide":d=!0}d?n.removeClass("tc-hidden"):n.addClass("tc-hidden"),n.data("isactive",d)}),n.addClass("iscpfdependson").data("iscpfdependson",1),n.each(function(){t(this).addClass("is-epo-depend")})},t.fn.run_cpfdependson=function(){i()}),t.tcepo={temp_floatbox:!1,tm_init_epo:function(t,e,a,i){q(t,e,a,i)}},X.on("tc_manual_init",function(t,e){F(e)}),$.ready(function(){X.on("tc_init_epo_plugin",function(t){z()}),t.ajaxPrefilter(function(e,a,i){if("yes"==tm_epo_js.tm_epo_enable_in_shop){var o=!1,r=e.url.split("?");if(r&&r.length>=1&&(r=r[1])){for(var n=r.split("&"),c=0;c<n.length;c++){var d=n[c].split("=");d.length>=1&&d[0]&&d[1]&&"wc-ajax"==d[0]&&"add_to_cart"==d[1]&&(o=!0)}o&&(e.originalsuccess=e.success,e.success=function(i){if(i&&i.error&&i.product_url){var o=t('.ajax_add_to_cart[data-product_id="'+a.data.product_id+'"]');o.removeClass("added"),o.removeClass("loading")}else e.originalsuccess.call(null,i)})}}if(a.data){var s=a.data;"string"==typeof a.data&&(s=a.data.tmparseParams());var l=[];if(a.url&&(l=a.url.slice(a.url.indexOf("?")+1).tmparseParams()),"quantity"in s&&(s.product_id||s["add-to-cart"]||l.product_id||l["add-to-cart"]||s.tcaddtocart)){var p=s.product_id||s["add-to-cart"]||l.product_id||l["add-to-cart"]||s.tcaddtocart,m=t(".tc-extra-product-options.tm-product-id-"+p);if(1==m.length){var _=t(".tc-totals-form.tm-product-id-"+p).find(".cpf-product-price").val(),f=t(".tc-totals-form.tm-product-id-"+p).find(".tc_form_prefix").val(),u={tcajax:1,tcaddtocart:p,cpf_product_price:_};f&&(u.tc_form_prefix=f),e.data=e.data+"&"+t.param(t.extend(m.tm_aserializeObject(),u),!1)}}}}),$.ajaxSuccess(function(e,a,i){t(".tm-cart-link").tmpoplink();var o={quick_view_plugin:t(".woocommerce.quick-view").not("body"),theme_flatsome:t(".product-lightbox"),theme_kleo:t("#productModal"),yith_quick_view_plugin:t("#yith-quick-view-modal,.yith-quick-view.yith-modal,.yith-quick-view.yith-inline"),venedor_quick_view_plugin:t(".quickview-wrap"),rubbez_quick_view:t("#quickview-content"),jckqv_quick_view:t("#jckqv"),themify_quick_view:t("#product_single_wrapper"),porto_quick_view:t(".quickview-wrap"),woocommerce_product_layouts:t(".dhvc-woo-product-quickview"),nm_getproduct:t("#popup"),lightboxpro:t(".wpb_wl_quick_view_content")},r=t.parseJSON(tm_epo_js.quickview_container||[]),n={};for(var c in r)n[r[c][0]]=t(r[c][1]);t.extend(o,n);for(var d in o)if(o.hasOwnProperty(d)&&o[d].length){if("yith_quick_view_plugin"==d&&o[d].find(".product").length<=0)continue;"lightboxpro"!=d&&"jckqv_quick_view"!=d&&"yith_quick_view_plugin"!=d&&"theme_flatsome"!=d||(U=!0);var s=(S=o[d]).find(L).attr("data-product-id"),l=S.find(L).attr("data-epo-id");q(S,!0,s,l),X.trigger("tmlazy"),X.trigger("tm_epo_loaded_quickview"),t.jMaskGlobals&&S.find(t.jMaskGlobals.maskElements).each(function(){var e=t(this);e.attr("data-mask")&&e.mask(e.attr("data-mask"))})}}),H.on("sober_quickview_opened",function(e){var a=(S=t("#quick-view-modal")).find(L).attr("data-product-id"),i=S.find(L).attr("data-epo-id");q(S,!0,a,i),X.trigger("tmlazy"),X.trigger("tm_epo_loaded_quickview"),t.jMaskGlobals&&S.find(t.jMaskGlobals.maskElements).each(function(){var e=t(this);e.attr("data-mask")&&e.mask(e.attr("data-mask"))})}),t("#wholesale_form").on("submit",function(){var e=t("form.cart").find(M).val(),a=t(L+'.tm-cart-main[data-product-id="'+e+'"]').tm_clone(),i=t('.tm-totals-form-main[data-product-id="'+e+'"]').tm_clone(),o=t('<div class="tm-hidden tm-formepo"></div>');return o.append(a),o.append(i),t(this).append(o),!0}),z(),t(".tm-cart-link").tmpoplink(),H.on("updated_checkout",function(){t(".tm-cart-link").tmpoplink()}),X.trigger("tmlazy"),X.trigger("tm_epo_loaded")})}(jQuery),function(t){t(document).ready(function(){t(document).on("click",".quantity .jckqv-qty-spinner, .quantity .ui-spinner-button",function(){t(this).closest(".quantity").find("input.qty").trigger("change")}),t(document).on("click","#add_to_quote",function(e){if(tm_epo_js&&"yes"==tm_epo_js.tm_epo_global_enable_validation){var a=t(this).parents("form");if(a.length>0&&!a.tc_validate().form())return void e.stopImmediatePropagation()}})})}(jQuery);