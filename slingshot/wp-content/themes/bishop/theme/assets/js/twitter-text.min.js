(function(){"use strict";function g(e,d){d=d||"";"string"!==typeof e&&(e.global&&0>d.indexOf("g")&&(d+="g"),e.ignoreCase&&0>d.indexOf("i")&&(d+="i"),e.multiline&&0>d.indexOf("m")&&(d+="m"),e=e.source);return RegExp(e.replace(/#\{(\w+)\}/g,function(e,d){var m=a.txt.regexen[d]||"";"string"!==typeof m&&(m=m.source);return m}),d)}function r(a,d){return a.replace(/#\{(\w+)\}/g,function(a,e){return d[e]||""})}function f(a,d,b){var h=String.fromCharCode(d);b!==d&&(h+="-"+String.fromCharCode(b));a.push(h);return a}function s(a){var d=
{},b;for(b in a)a.hasOwnProperty(b)&&(d[b]=a[b]);return d}function p(a,d,b){return b?!a||a.match(d)&&RegExp["$&"]===a:"string"===typeof a&&a.match(d)&&RegExp["$&"]===a}if("undefined"===typeof a||null===a)var a={};a.txt={};a.txt.regexen={};var y={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};a.txt.htmlEscape=function(a){return a&&a.replace(/[&"'><]/g,function(a){return y[a]})};a.txt.regexSupplant=g;a.txt.stringSupplant=r;a.txt.addCharsToCharClass=f;var k=String.fromCharCode,c=[k(32),
k(133),k(160),k(5760),k(6158),k(8232),k(8233),k(8239),k(8287),k(12288)];f(c,9,13);f(c,8192,8202);var u=[k(65534),k(65279),k(65535)];f(u,8234,8238);a.txt.regexen.spaces_group=g(c.join(""));a.txt.regexen.spaces=g("["+c.join("")+"]");a.txt.regexen.invalid_chars_group=g(u.join(""));a.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;a.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/mg;a.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/mg;
c=[];f(c,1024,1279);f(c,1280,1319);f(c,11744,11775);f(c,42560,42655);f(c,1425,1471);f(c,1473,1474);f(c,1476,1477);f(c,1479,1479);f(c,1488,1514);f(c,1520,1524);f(c,64274,64296);f(c,64298,64310);f(c,64312,64316);f(c,64318,64318);f(c,64320,64321);f(c,64323,64324);f(c,64326,64335);f(c,1552,1562);f(c,1568,1631);f(c,1646,1747);f(c,1749,1756);f(c,1758,1768);f(c,1770,1775);f(c,1786,1788);f(c,1791,1791);f(c,1872,1919);f(c,2208,2208);f(c,2210,2220);f(c,2276,2302);f(c,64336,64433);f(c,64467,64829);f(c,64848,
64911);f(c,64914,64967);f(c,65008,65019);f(c,65136,65140);f(c,65142,65276);f(c,8204,8204);f(c,3585,3642);f(c,3648,3662);f(c,4352,4607);f(c,12592,12677);f(c,43360,43391);f(c,44032,55215);f(c,55216,55295);f(c,65441,65500);f(c,12449,12538);f(c,12540,12542);f(c,65382,65439);f(c,65392,65392);f(c,65296,65305);f(c,65313,65338);f(c,65345,65370);f(c,12353,12438);f(c,12441,12446);f(c,13312,19903);f(c,19968,40959);f(c,173824,177983);f(c,177984,178207);f(c,194560,195103);f(c,12291,12291);f(c,12293,12293);f(c,
12347,12347);a.txt.regexen.nonLatinHashtagChars=g(c.join(""));c=[];f(c,192,214);f(c,216,246);f(c,248,255);f(c,256,591);f(c,595,596);f(c,598,599);f(c,601,601);f(c,603,603);f(c,611,611);f(c,616,616);f(c,623,623);f(c,626,626);f(c,649,649);f(c,651,651);f(c,699,699);f(c,768,879);f(c,7680,7935);a.txt.regexen.latinAccentChars=g(c.join(""));a.txt.regexen.hashSigns=/[#\uff03]/;a.txt.regexen.hashtagAlpha=g(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i);a.txt.regexen.hashtagAlphaNumeric=g(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i);
a.txt.regexen.endHashtagMatch=g(/^(?:#{hashSigns}|:\/\/)/);a.txt.regexen.hashtagBoundary=g(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/);a.txt.regexen.validHashtag=g(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);a.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@\uff20]|RT:?)/;a.txt.regexen.atSigns=/[@\uff20]/;a.txt.regexen.validMentionOrList=g("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?",
"g");a.txt.regexen.validReply=g(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/);a.txt.regexen.endMentionMatch=g(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/);a.txt.regexen.validUrlPrecedingChars=g(/(?:[^A-Za-z0-9@\uff20$#\uff03#{invalid_chars_group}]|^)/);a.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/;a.txt.regexen.invalidDomainChars=r("#{punct}#{spaces_group}#{invalid_chars_group}",a.txt.regexen);a.txt.regexen.validDomainChars=g(/[^#{invalidDomainChars}]/);a.txt.regexen.validSubdomain=
g(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);a.txt.regexen.validDomainName=g(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);a.txt.regexen.validGTLD=g(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/);a.txt.regexen.validCCTLD=g(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|sx)(?=[^0-9a-zA-Z]|$))/);
a.txt.regexen.validPunycode=g(/(?:xn--[0-9a-z]+)/);a.txt.regexen.validDomain=g(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);a.txt.regexen.validAsciiDomain=g(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);a.txt.regexen.invalidShortDomain=g(/^#{validDomainName}#{validCCTLD}$/);a.txt.regexen.validPortNumber=g(/[0-9]+/);a.txt.regexen.validGeneralUrlPathChars=g(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i);
a.txt.regexen.validUrlBalancedParens=g(/\(#{validGeneralUrlPathChars}+\)/i);a.txt.regexen.validUrlPathEndingChars=g(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i);a.txt.regexen.validUrlPath=g("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i");a.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i;a.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i;
a.txt.regexen.extractUrl=g("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi");a.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i;a.txt.regexen.urlHasProtocol=/^https?:\/\//i;a.txt.regexen.urlHasHttps=/^https:\/\//i;a.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i;a.txt.regexen.validCashtag=g("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi");a.txt.regexen.validateUrlUnreserved=
/[a-z0-9\-._~]/i;a.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i;a.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i;a.txt.regexen.validateUrlPchar=g("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i");a.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i;a.txt.regexen.validateUrlUserinfo=g("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i");a.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i;
a.txt.regexen.validateUrlIpv4=g(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i);a.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i;a.txt.regexen.validateUrlIp=g("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i");a.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i;a.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i;a.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i;a.txt.regexen.validateUrlDomain=g(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i);
a.txt.regexen.validateUrlHost=g("(?:#{validateUrlIp}|#{validateUrlDomain})","i");a.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;a.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;a.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
a.txt.regexen.validateUrlUnicodeDomain=g(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i);a.txt.regexen.validateUrlUnicodeHost=g("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i");a.txt.regexen.validateUrlPort=/[0-9]{1,5}/;a.txt.regexen.validateUrlUnicodeAuthority=g("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i");a.txt.regexen.validateUrlAuthority=g("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?",
"i");a.txt.regexen.validateUrlPath=g(/(\/#{validateUrlPchar}*)*/i);a.txt.regexen.validateUrlQuery=g(/(#{validateUrlPchar}|\/|\?)*/i);a.txt.regexen.validateUrlFragment=g(/(#{validateUrlPchar}|\/|\?)*/i);a.txt.regexen.validateUrlUnencoded=g("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var z={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,
linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},v={disabled:!0,readonly:!0,multiple:!0,checked:!0};a.txt.tagAttrs=function(e){var d="",b;for(b in e){var h=e[b];v[b]&&(h=h?b:null);null!=h&&(d+=" "+a.txt.htmlEscape(b)+'="'+a.txt.htmlEscape(h.toString())+'"')}return d};a.txt.linkToText=
function(e,d,b,h){h.suppressNoFollow||(b.rel="nofollow");h.linkAttributeBlock&&h.linkAttributeBlock(e,b);h.linkTextBlock&&(d=h.linkTextBlock(e,d));e={text:d,attr:a.txt.tagAttrs(b)};return r("<a#{attr}>#{text}</a>",e)};a.txt.linkToTextWithSymbol=function(e,d,b,h,m){var c=m.symbolTag?"<"+m.symbolTag+">"+d+"</"+m.symbolTag+">":d;b=a.txt.htmlEscape(b);b=m.textWithSymbolTag?"<"+m.textWithSymbolTag+">"+b+"</"+m.textWithSymbolTag+">":b;return m.usernameIncludeSymbol||!d.match(a.txt.regexen.atSigns)?a.txt.linkToText(e,
c+b,h,m):c+a.txt.linkToText(e,b,h,m)};a.txt.linkToHashtag=function(e,d,b){d=d.substring(e.indices[0],e.indices[0]+1);var h=a.txt.htmlEscape(e.hashtag),m=s(b.htmlAttrs||{});m.href=b.hashtagUrlBase+h;m.title="#"+h;m["class"]=b.hashtagClass;h[0].match(a.txt.regexen.rtl_chars)&&(m["class"]+=" rtl");b.targetBlank&&(m.target="_blank");return a.txt.linkToTextWithSymbol(e,d,h,m,b)};a.txt.linkToCashtag=function(e,d,b){d=a.txt.htmlEscape(e.cashtag);var h=s(b.htmlAttrs||{});h.href=b.cashtagUrlBase+d;h.title=
"$"+d;h["class"]=b.cashtagClass;b.targetBlank&&(h.target="_blank");return a.txt.linkToTextWithSymbol(e,"$",d,h,b)};a.txt.linkToMentionAndList=function(e,d,b){d=d.substring(e.indices[0],e.indices[0]+1);var h=a.txt.htmlEscape(e.screenName),m=a.txt.htmlEscape(e.listSlug),c=e.listSlug&&!b.suppressLists,f=s(b.htmlAttrs||{});f["class"]=c?b.listClass:b.usernameClass;f.href=c?b.listUrlBase+h+m:b.usernameUrlBase+h;c||b.suppressDataScreenName||(f["data-screen-name"]=h);b.targetBlank&&(f.target="_blank");return a.txt.linkToTextWithSymbol(e,
d,c?h+m:h,f,b)};a.txt.linkToUrl=function(e,d,b){d=e.url;var h=a.txt.htmlEscape(d),m=b.urlEntities&&b.urlEntities[d]||e;m.display_url&&(h=a.txt.linkTextWithEntity(m,b));var c=s(b.htmlAttrs||{});d.match(a.txt.regexen.urlHasProtocol)||(d="http://"+d);c.href=d;b.targetBlank&&(c.target="_blank");b.urlClass&&(c["class"]=b.urlClass);b.urlTarget&&(c.target=b.urlTarget);!b.title&&m.display_url&&(c.title=m.expanded_url);return a.txt.linkToText(e,h,c,b)};a.txt.linkTextWithEntity=function(e,d){var b=e.display_url,
h=e.expanded_url,c=b.replace(/\u2026/g,"");if(-1!=h.indexOf(c)){var f=h.indexOf(c),b={displayUrlSansEllipses:c,beforeDisplayUrl:h.substr(0,f),afterDisplayUrl:h.substr(f+c.length),precedingEllipsis:b.match(/^\u2026/)?"\u2026":"",followingEllipsis:b.match(/\u2026$/)?"\u2026":""},g;for(g in b)b.hasOwnProperty(g)&&(b[g]=a.txt.htmlEscape(b[g]));b.invisible=d.invisibleTagAttrs;return r("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",
b)}return b};a.txt.autoLinkEntities=function(e,d,b){b=s(b||{});b.hashtagClass=b.hashtagClass||"tweet-url hashtag";b.hashtagUrlBase=b.hashtagUrlBase||"https://twitter.com/#!/search?q=%23";b.cashtagClass=b.cashtagClass||"tweet-url cashtag";b.cashtagUrlBase=b.cashtagUrlBase||"https://twitter.com/#!/search?q=%24";b.listClass=b.listClass||"tweet-url list-slug";b.usernameClass=b.usernameClass||"tweet-url username";b.usernameUrlBase=b.usernameUrlBase||"https://twitter.com/";b.listUrlBase=b.listUrlBase||
"https://twitter.com/";b.htmlAttrs=a.txt.extractHtmlAttrsFromOptions(b);b.invisibleTagAttrs=b.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var h,c,f;if(b.urlEntities){h={};c=0;for(f=b.urlEntities.length;c<f;c++)h[b.urlEntities[c].url]=b.urlEntities[c];b.urlEntities=h}h="";f=0;d.sort(function(a,b){return a.indices[0]-b.indices[0]});var g=b.htmlEscapeNonEntities?a.txt.htmlEscape:function(a){return a};for(c=0;c<d.length;c++){var l=d[c];h+=g(e.substring(f,l.indices[0]));l.url?h+=a.txt.linkToUrl(l,
e,b):l.hashtag?h+=a.txt.linkToHashtag(l,e,b):l.screenName?h+=a.txt.linkToMentionAndList(l,e,b):l.cashtag&&(h+=a.txt.linkToCashtag(l,e,b));f=l.indices[1]}return h+=g(e.substring(f,e.length))};a.txt.autoLinkWithJSON=function(e,d,b){var h=[],c;for(c in d)h=h.concat(d[c]);for(d=0;d<h.length;d++)entity=h[d],entity.screen_name?entity.screenName=entity.screen_name:entity.text&&(entity.hashtag=entity.text);a.txt.modifyIndicesFromUnicodeToUTF16(e,h);return a.txt.autoLinkEntities(e,h,b)};a.txt.extractHtmlAttrsFromOptions=
function(a){var d={},b;for(b in a){var h=a[b];z[b]||(v[b]&&(h=h?b:null),null!=h&&(d[b]=h))}return d};a.txt.autoLink=function(e,d){var b=a.txt.extractEntitiesWithIndices(e,{extractUrlsWithoutProtocol:!1});return a.txt.autoLinkEntities(e,b,d)};a.txt.autoLinkUsernamesOrLists=function(e,d){var b=a.txt.extractMentionsOrListsWithIndices(e);return a.txt.autoLinkEntities(e,b,d)};a.txt.autoLinkHashtags=function(e,d){var b=a.txt.extractHashtagsWithIndices(e);return a.txt.autoLinkEntities(e,b,d)};a.txt.autoLinkCashtags=
function(e,d){var b=a.txt.extractCashtagsWithIndices(e);return a.txt.autoLinkEntities(e,b,d)};a.txt.autoLinkUrlsCustom=function(e,d){var b=a.txt.extractUrlsWithIndices(e,{extractUrlsWithoutProtocol:!1});return a.txt.autoLinkEntities(e,b,d)};a.txt.removeOverlappingEntities=function(a){a.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var d=a[0],b=1;b<a.length;b++)d.indices[1]>a[b].indices[0]?(a.splice(b,1),b--):d=a[b]};a.txt.extractEntitiesWithIndices=function(e,d){var b=a.txt.extractUrlsWithIndices(e,
d).concat(a.txt.extractMentionsOrListsWithIndices(e)).concat(a.txt.extractHashtagsWithIndices(e,{checkUrlOverlap:!1})).concat(a.txt.extractCashtagsWithIndices(e));if(0==b.length)return[];a.txt.removeOverlappingEntities(b);return b};a.txt.extractMentions=function(e){var d=[];e=a.txt.extractMentionsWithIndices(e);for(var b=0;b<e.length;b++)d.push(e[b].screenName);return d};a.txt.extractMentionsWithIndices=function(e){for(var d=[],b=a.txt.extractMentionsOrListsWithIndices(e),h=0;h<b.length;h++)e=b[h],
""==e.listSlug&&d.push({screenName:e.screenName,indices:e.indices});return d};a.txt.extractMentionsOrListsWithIndices=function(e){if(!e||!e.match(a.txt.regexen.atSigns))return[];var d=[];e.replace(a.txt.regexen.validMentionOrList,function(b,e,c,f,g,l,k){k.slice(l+b.length).match(a.txt.regexen.endMentionMatch)||(g=g||"",b=l+e.length,d.push({screenName:f,listSlug:g,indices:[b,b+f.length+g.length+1]}))});return d};a.txt.extractReplies=function(e){if(!e)return null;e=e.match(a.txt.regexen.validReply);
return!e||RegExp.rightContext.match(a.txt.regexen.endMentionMatch)?null:e[1]};a.txt.extractUrls=function(e,d){for(var b=[],h=a.txt.extractUrlsWithIndices(e,d),c=0;c<h.length;c++)b.push(h[c].url);return b};a.txt.extractUrlsWithIndices=function(e,d){d||(d={extractUrlsWithoutProtocol:!0});if(!e||(d.extractUrlsWithoutProtocol?!e.match(/\./):!e.match(/:/)))return[];for(var b=[];a.txt.regexen.extractUrl.exec(e);){var h=RegExp.$2,c=RegExp.$3,f=RegExp.$5,g=RegExp.$7,l=a.txt.regexen.extractUrl.lastIndex,k=
l-c.length;if(RegExp.$4)c.match(a.txt.regexen.validTcoUrl)&&(c=RegExp.lastMatch,l=k+c.length),b.push({url:c,indices:[k,l]});else if(d.extractUrlsWithoutProtocol&&!h.match(a.txt.regexen.invalidUrlWithoutProtocolPrecedingChars)){var n=null,t=!1,q=0;f.replace(a.txt.regexen.validAsciiDomain,function(e){var d=f.indexOf(e,q);q=d+e.length;n={url:e,indices:[k+d,k+q]};(t=e.match(a.txt.regexen.invalidShortDomain))||b.push(n)});null!=n&&g&&(t&&b.push(n),n.url=c.replace(f,n.url),n.indices[1]=l)}}return b};a.txt.extractHashtags=
function(e){var d=[];e=a.txt.extractHashtagsWithIndices(e);for(var b=0;b<e.length;b++)d.push(e[b].hashtag);return d};a.txt.extractHashtagsWithIndices=function(e,d){d||(d={checkUrlOverlap:!0});if(!e||!e.match(a.txt.regexen.hashSigns))return[];var b=[];e.replace(a.txt.regexen.validHashtag,function(e,d,c,h,f,g){g.slice(f+e.length).match(a.txt.regexen.endHashtagMatch)||(e=f+d.length,b.push({hashtag:h,indices:[e,e+h.length+1]}))});if(d.checkUrlOverlap){var c=a.txt.extractUrlsWithIndices(e);if(0<c.length){c=
b.concat(c);a.txt.removeOverlappingEntities(c);for(var b=[],f=0;f<c.length;f++)c[f].hashtag&&b.push(c[f])}}return b};a.txt.extractCashtags=function(e){var d=[];e=a.txt.extractCashtagsWithIndices(e);for(var b=0;b<e.length;b++)d.push(e[b].cashtag);return d};a.txt.extractCashtagsWithIndices=function(e){if(!e||-1==e.indexOf("$"))return[];var d=[];e.replace(a.txt.regexen.validCashtag,function(a,e,c,f,g){a=g+e.length;d.push({cashtag:f,indices:[a,a+f.length+1]})});return d};a.txt.modifyIndicesFromUnicodeToUTF16=
function(e,d){a.txt.convertUnicodeIndices(e,d,!1)};a.txt.modifyIndicesFromUTF16ToUnicode=function(e,d){a.txt.convertUnicodeIndices(e,d,!0)};a.txt.getUnicodeTextLength=function(e){return e.replace(a.txt.regexen.non_bmp_code_pairs," ").length};a.txt.convertUnicodeIndices=function(a,d,b){if(0!=d.length){var c=0,f=0;d.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var g=0,k=d[0];c<a.length;){if(k.indices[0]==(b?c:f)){var l=k.indices[1]-k.indices[0];k.indices[0]=b?f:c;k.indices[1]=k.indices[0]+
l;g++;if(g==d.length)break;k=d[g]}l=a.charCodeAt(c);55296<=l&&56319>=l&&c<a.length-1&&(l=a.charCodeAt(c+1),56320<=l&&57343>=l&&c++);f++;c++}}};a.txt.splitTags=function(a){a=a.split("<");for(var d,b=[],c=0;c<a.length;c+=1)if(d=a[c]){d=d.split(">");for(var f=0;f<d.length;f+=1)b.push(d[f])}else b.push("");return b};a.txt.hitHighlight=function(e,d,b){d=d||[];b=b||{};if(0===d.length)return e;b=b.tag||"em";b=["<"+b+">","</"+b+">"];e=a.txt.splitTags(e);var c,f,g="",k=0,l=e[0],p=0,n=0,t=!1,q=l,s=[],r;for(c=
0;c<d.length;c+=1)for(f=0;f<d[c].length;f+=1)s.push(d[c][f]);for(d=0;d<s.length;d+=1){f=s[d];c=b[d%2];for(r=!1;null!=l&&f>=p+l.length;)g+=q.slice(n),t&&f===p+q.length&&(g+=c,r=!0),e[k+1]&&(g+="<"+e[k+1]+">"),p+=q.length,n=0,k+=2,q=l=e[k],t=!1;r||null==l?r||(g+=c):(t=f-p,g+=q.slice(n,t)+c,n=t,t=0===d%2?!0:!1)}if(null!=l)for(n<q.length&&(g+=q.slice(n)),d=k+1;d<e.length;d+=1)g+=0===d%2?e[d]:"<"+e[d]+">";return g};var w=[k(65534),k(65279),k(65535),k(8234),k(8235),k(8236),k(8237),k(8238)];a.txt.getTweetLength=
function(e,d){d||(d={short_url_length:22,short_url_length_https:23});var b=a.txt.getUnicodeTextLength(e),c=a.txt.extractUrlsWithIndices(e);a.txt.modifyIndicesFromUTF16ToUnicode(e,c);for(var f=0;f<c.length;f++)b+=c[f].indices[0]-c[f].indices[1],b=c[f].url.toLowerCase().match(a.txt.regexen.urlHasHttps)?b+d.short_url_length_https:b+d.short_url_length;return b};a.txt.isInvalidTweet=function(e){if(!e)return"empty";if(140<a.txt.getTweetLength(e))return"too_long";for(var d=0;d<w.length;d++)if(0<=e.indexOf(w[d]))return"invalid_characters";
return!1};a.txt.isValidTweetText=function(e){return!a.txt.isInvalidTweet(e)};a.txt.isValidUsername=function(e){if(!e)return!1;var d=a.txt.extractMentions(e);return 1===d.length&&d[0]===e.slice(1)};var A=g(/^#{validMentionOrList}$/);a.txt.isValidList=function(a){a=a.match(A);return!(!a||""!=a[1]||!a[4])};a.txt.isValidHashtag=function(e){if(!e)return!1;var d=a.txt.extractHashtags(e);return 1===d.length&&d[0]===e.slice(1)};a.txt.isValidUrl=function(e,d,b){null==d&&(d=!0);null==b&&(b=!0);if(!e)return!1;
var c=e.match(a.txt.regexen.validateUrlUnencoded);if(!c||c[0]!==e)return!1;e=c[1];var f=c[2],g=c[3],k=c[4],c=c[5];return(!b||p(e,a.txt.regexen.validateUrlScheme)&&e.match(/^https?$/i))&&p(g,a.txt.regexen.validateUrlPath)&&p(k,a.txt.regexen.validateUrlQuery,!0)&&p(c,a.txt.regexen.validateUrlFragment,!0)?d&&p(f,a.txt.regexen.validateUrlUnicodeAuthority)||!d&&p(f,a.txt.regexen.validateUrlAuthority):!1};"undefined"!=typeof module&&module.exports&&(module.exports=a.txt);if("undefined"!=typeof window)if(window.twttr)for(var x in a)window.twttr[x]=
a[x];else window.twttr=a})();
