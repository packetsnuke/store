(function(b){b.yit_popup=function(d,e){var h={popup_class:"yit-popup",content:""},a=this;a.settings={};var c=b(d);a.init=function(){a.settings=b.extend({},h,e);0==b("body").find(".yitpopup_overlay").length?a.overlay=b("<div />",{"class":"yitpopup_overlay"}).appendTo("body"):a.overlay=b("body").find(".yitpopup_overlay");0==a.overlay.find(".yitpopup_wrapper").length?a.popup=b("<div />",{"class":"yitpopup_wrapper "+a.settings.popup_class}).appendTo(b("body")):a.popup=b("body").find(".yitpopup_wrapper");
    0==a.overlay.find(".close").length?a.close=b("<a />",{"class":"close"}).appendTo(a.popup):a.close=a.overlay.find(".close");k()};var k=function(){b(document).on("touchstart click",".yitpopup_overlay",function(a){(b(a.target).hasClass("close")||0==b(a.target).parents(".yitpopup_overlay").length)&&f()}).on("keyup",function(a){27==a.keyCode&&f()}).on("click",".yitpopup_wrapper a.close",function(){f()});b(window).on("resize",function(){g()});b("html").removeClass("yit-opened");l();g();a.overlay.css({display:"block",
    opacity:0}).animate({opacity:1},500);b("html").addClass("yit-opened")},g=function(){a.popup.css({position:"fixed",top:Math.max(0,(jQuery(window).height()-a.popup.outerHeight())/2-50)+"px",left:Math.max(0,(jQuery(window).width()-a.popup.outerWidth())/2)+"px"})},f=function(){a.overlay.css({display:"none",opacity:1}).animate({opacity:0},500);c.trigger("close.yit-popup");b("html").removeClass("yit-opened");a.popup.remove();a.overlay.remove();c.removeData("yit_popup")},l=function(){""!=a.settings.content?
    a.popup.html(a.settings.content):c.data("container")?a.popup.html(b(c.data("container")).html()):c.data("content")?a.popup.html(c.data("content")):c.attr("title")?a.popup.html(c.attr("title")):a.popup.html("");a.popup.find("form, input, label, a").each(function(){if("undefined"!=typeof b(this).attr("id")){var a=b(this).attr("id")+"_yit-popup";b(this).attr("id",a)}"undefined"!=typeof b(this).attr("for")&&(a=b(this).attr("for")+"_yit-popup",b(this).attr("for",a))});0==a.overlay.find(".close").length?
    a.close=b("<a />",{"class":"close"}).appendTo(a.popup):a.close=a.overlay.find(".close")};a.init()};b.fn.yit_popup=function(d){return this.each(function(){if(void 0===b(this).data("yit_popup")){var e=new b.yit_popup(this,d);b(this).data("yit_popup",e)}})}})(jQuery);