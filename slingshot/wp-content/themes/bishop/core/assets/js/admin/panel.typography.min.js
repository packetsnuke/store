(function(n,b,p){b.yit_panel_typography=function(a,e){this.element=b(e);this._init(a)};b.yit_panel_typography.defaults={elements:{size:".typography_size",unit:".typography_unit",family:".typography_family",style:".typography_style",color:".typography_color",align:".typography_align",transform:".typography_transform",preview:".font-preview p",refresh:".refresh"}};b.yit_panel_typography.prototype={_init:function(a){this.options=b.extend(!0,{},b.yit_panel_typography.defaults,a);""==yit_family_string&&(a=b.parseJSON(yit_web_fonts),yit_family_string+='<optgroup label="Web Fonts">',b.each(a.items,function(a,b){yit_family_string+='<option value="'+b+'">'+b+"</option>"}),yit_family_string+="</optgroup>",a=b.parseJSON(yit_google_fonts),yit_family_string+='<optgroup label="Google Fonts">',b.each(a.items,function(a,b){var h=b.toString().replace("700","bold").replace("700italic","bold-italic");yit_family_string+='<option data-variations="'+h+'" value="'+a+'">'+a+"</option>"}),yit_family_string+="</optgroup>");this._loadElements();this._initEvents()},_loadElements:function(){var a=this.options.elements,b=this.element,d;for(d in a)a[d]=b.find(a[d])},_initEvents:function(){var a=this.options.elements,e=a.size;e.spinner({min:e.data("min")?e.data("min"):null,max:e.data("max")?e.data("max"):null});a.refresh.on("click",function(c){c.preventDefault();b(this).parent().fadeOut("slow");a.preview.css("color",a.color.find("input.wp-color-picker").val());a.preview.css("text-transform",a.transform.val());a.preview.css("text-align",a.align.val());c=a.size.val();var f=a.unit.val();a.preview.css("font-size",c+f);a.preview.css("line-height",("em"==f||"rem"==f?Number(c)+.4:Number(c)+4)+f);c=a.style.val();"italic"==c?a.preview.css({"font-weight":"normal","font-style":"italic"}):"bold"==c?a.preview.css({"font-weight":"bold","font-style":"normal"}):"extra-bold"==c?a.preview.css({"font-weight":"800","font-style":"normal"}):"bold-italic"==c?a.preview.css({"font-weight":"bold","font-style":"italic"}):"regular"==c?a.preview.css({"font-weight":"normal","font-style":"normal"}):b.isNumeric(c)?a.preview.css({"font-weight":c,"font-style":"normal"}):a.preview.css({"font-weight":c.replace("italic",""),"font-style":"italic"});c=a.family.val();f=a.family.find("option:selected").parent().attr("label");"default"==c&&(c="#"+a.family.find("option:selected").parent().data("default-font-id")+"-family",c=b(c).find("option:selected").val(),f=-1!=b.inArray(c,b.parseJSON(yit_web_fonts).items)?"Web Fonts":"Google Fonts");"Web Fonts"==f?a.preview.css("font-family",c):(c=document.createElement("script"),c.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",c.type="text/javascript",c.async="true",f=document.getElementsByTagName("script")[0],f.parentNode.insertBefore(c,f))});b([a.size,a.unit]).each(function(){b(this).on("change",function(){if(!a.refresh.is(":visible")){var c=a.size.val(),b=a.unit.val();a.preview.css({"font-size":c+b,"line-height":("em"==b||"rem"==b?Number(c)+.4:Number(c)+4)+b}).trigger("resize")}})});e=a.family;e.on("mousedown",function(a){a=b(this);if(0==a.data("instance")){a.val();var f=a.find("option:selected").text();a.html(yit_family_string).find("option").filter(function(){return b(this).text()==f}).prop("selected",!0);a.find("option").filter(function(){return"default"==b(this).text()}).text(yit_default_name);1==a.parents(".typography_container").data("is-default")&&a.find("option").filter(function(){return"default"==b(this).val()}).remove();a.data("instance","true")}});e.on("change",function(c,f){var d=b(this),e=d.find("option:selected").parent().attr("label"),h=d.find("option:selected").parents(".select_wrapper").next().find("select.typography_style"),g=d.find("option:selected").data("variations"),l=b(this).val(),m="";"undefined"===typeof g?"default"==d.attr("value")?(g="#"+d.data("default-font-id")+"-family",l=b(g).find("option:selected").val(),g=d.find('option[value="'+l+'"]').data("variations"),g="undefined"===typeof g?["regular"," bold"," extra-bold"," italic"," bold-italic"]:g.split(",")):g=["regular"," bold"," extra-bold"," italic"," bold-italic"]:g=g.split(",");f||h.prev().empty().append(g[0]);for(var k in g)m=m+'<option value="'+g[k]+'">'+g[k]+"</option>";h.empty().append(m);h.data("first-init","true");a.refresh.is(":visible")||("Web Fonts"==e?a.preview.css("font-family",l):WebFont.load({google:{families:[l]},fontactive:function(b,c){a.preview.css("font-family",b)}}),a.preview.trigger("resize"))});var d=a.style;d.on("change",function(){if(!a.refresh.is(":visible")){var c=b(this).val();"italic"==c?a.preview.css({"font-weight":"normal","font-style":"italic"}):"bold"==c?a.preview.css({"font-weight":"bold","font-style":"normal"}):"extra-bold"==c?a.preview.css({"font-weight":"800","font-style":"normal"}):"bold-italic"==c?a.preview.css({"font-weight":"bold","font-style":"italic"}):"regular"==c?a.preview.css({"font-weight":"normal","font-style":"normal"}):b.isNumeric(c)?a.preview.css({"font-weight":c,"font-style":"normal"}):a.preview.css({"font-weight":c.replace("italic",""),"font-style":"italic"});a.preview.trigger("resize")}});d.on("mousedown",function(c){0==a.family.has("optgroup").length?b(a.family).trigger("mousedown").trigger("change",!0):"false"==d.data("first-init")&&(b(a.family).trigger("change",!0),d.data("first-init","true"))});a.preview.resize(function(){var a=b(this).parents(".yit-box");b(this).parents("form").height(a.height())});var h=a.transform;h.on("change",function(b){a.refresh.is(":visible")||a.preview.css("text-transform",h.val())});var k=a.align;k.on("change",function(b){a.refresh.is(":visible")||a.preview.css("text-align",k.val())})}};b.fn.yit_panel_typography=function(a){if("string"===typeof a){var e=Array.prototype.slice.call(arguments,1);this.each(function(){var d=b.data(this,"yit_panel_typography");d?b.isFunction(d[a])&&"_"!==a.charAt(0)?d[a].apply(d,e):console.error("no such method '"+a+"' for yit_panel_typography instance"):console.error("cannot call methods on yit_checkout prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){b.data(this,"yit_panel_typography")||b.data(this,"yit_panel_typography",new b.yit_panel_typography(a,this))});return this}})(window,jQuery);