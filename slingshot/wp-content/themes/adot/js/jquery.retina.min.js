
(function(b){b.fn.retina=function(c){c=b.extend(true,{enable:true,css:{},appendTo:"body",src:null,radius:null,ie:{css3pie:"PIE.htc",cursor:"blank.cur"},preload:false},c);if(c.enable){this.each(function(){if(this.retina){this.retina.deattach()}this.retina=new a(this,c.src||b(this).attr("rel")||b(this).attr("src")||b(this).attr("href"),c)})}else{this.each(function(){if(this.retina){this.retina.deattach();delete this.retina}})}return this};var a=function(i,k,o){var j=this;var g=b(i);var m;var d;var n=function(){d=b.browser.msie&&/^[5-8]\./.test(b.browser.version);var q=function(){if(d&&o.ie.cursor){return"url("+o.ie.cursor+"),crosshair"}if(b.browser.mozilla||b.browser.opera){return"none"}var r="AAACAAEAICAAAAAAAADoAgAAFgAAACgAAAAgAAAAQAAAAAEABAAAAAAAgAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACAAAAAgIAAgAAAAIAAgACAgAAAgICAAMDAwAAAAP8AAP8AAAD//wD/AAAA/wD/AP//AAD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////w==";if(b.browser.webkit){r=r.slice(0,829)+"P"+r.slice(830,1016)+"f"+r.slice(1017)}return"url(data:text/plain;base64,"+r+"),none"};m=b('<div class="zoom_images"></div>');m.css(b.extend(true,{display:"none",background:"no-repeat center center white url("+k+")",border:"4px solid white",position:"absolute",top:0,left:0,height:230,width:230,cursor:q()},o.css));m.appendTo(o.appendTo);var p=o.radius||Math.min(m.width(),m.height())/2+"px";m.css({borderRadius:p,"-webkit-border-radius":p,"-moz-border-radius":p});if(d&&o.ie.css3pie){m.css("behavior","url("+o.ie.css3pie+")")}b(document).bind("mousemove",j.move);g.find("img").add(g).load(j.loadSize);b(window).resize(j.loadSize);n=b.noop};var h,c,l,e,f;j.loadSize=function(){h=g.offset();c=g.width();l=g.height();e=m.width();f=m.height()};j.show=function(p){n();j.loadSize();if(d&&o.ie.css3pie){m.show()}else{m.stop(true,true).fadeIn("fast")}j.move(p)};j.hide=function(){if(d&&o.ie.css3pie){m.hide()}else{m.stop(true,true).fadeOut("fast")}};j.move=function(p){if(p.pageX<h.left||p.pageY<h.top){return j.hide()}if(h.left+c<p.pageX){return j.hide()}if(h.top+l<p.pageY){return j.hide()}m.css({marginLeft:p.pageX-e/2,marginTop:p.pageY-f/2,backgroundPosition:((100/c)*(p.pageX-h.left))+"% "+((100/l)*(p.pageY-h.top))+"%"})};j.deattach=function(){g.unbind("mouseenter",j.show);if(m){m.remove();b(document).unbind("mousemove",j.move);g.find("img").add(g).unbind("load",j.loadSize);b(window).unbind("resize",j.loadSize)}};g.bind("mouseenter",j.show);if(o.preload){b(new Image).attr("src",k)}}})(jQuery);